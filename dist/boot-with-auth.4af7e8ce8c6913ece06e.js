(self.webpackChunk=self.webpackChunk||[]).push([[3683],{99049:function(e,t,n){"use strict";n.r(t),n.d(t,{bootWithToken:function(){return lr}});var a=n(63696),r=n(41705),o=n(80249),s=(n(86926),n(83732)),i=n.n(s),l=(0,o.Ng)(((e,t)=>{var{noteId:n}=t;return{lastUpdated:e.simperium.lastSync.get(n)}}))((e=>{var{lastUpdated:t}=e;return void 0!==t?a.createElement("time",{dateTime:new Date(t).toISOString()},new Date(t).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})):a.createElement("span",null)})),c=n(14863),u=n(16742),d=e=>"simplenote://note/".concat(e),m=e=>{var t=new Set;if(!e.ui.openedNote)return[];var n=d(e.ui.openedNote);return e.data.notes.forEach(((e,a)=>{e.content.includes(n)&&t.add(a)})),[...t.values()]},p=(e,t)=>{var n,a=e.data.notes.get(t);if(a&&e.ui.openedNote){var r=new RegExp(d(e.ui.openedNote),"gi"),o=(null==a||null===(n=a.content.match(r))||void 0===n?void 0:n.length)||0,{title:s}=(0,u.Ay)(a);return{count:o,noteId:t,modificationDate:null==a?void 0:a.modificationDate,title:s}}},g=n(61943),h=(0,o.Ng)(((e,t)=>{var{noteId:n}=t;return{reference:p(e,n)}}),((e,t)=>{var{noteId:n}=t;return{openNote:()=>e(g.A.ui.selectNote(n))}}))((e=>{var{openNote:t,reference:n}=e;return n?a.createElement("button",{className:"reference-link",onClick:t},a.createElement("span",{className:"reference-title note-info-name"},n.title),a.createElement("span",null,n.count," Reference",n.count>1?"s":"",n.modificationDate&&", last modified ",n.modificationDate&&a.createElement("time",{dateTime:new Date(1e3*n.modificationDate).toISOString()},new Date(1e3*n.modificationDate).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))):null})),E=(0,o.Ng)((e=>({references:m(e)})))((e=>{var{references:t}=e;return t.length?a.createElement("div",{className:"note-references note-info-panel note-info-internal-link"},a.createElement("div",{className:"note-info-item"},a.createElement("div",{className:"note-info-name"},"Referenced In"),t.map((e=>a.createElement(h,{noteId:e,key:e}))))):null})),v=n(1962);class N extends a.Component{render(){var{noteId:e,note:t,onModalClose:n,theme:r}=this.props,o=1e3*t.creationDate,s=t.modificationDate?1e3*t.modificationDate:null;return a.createElement(i(),{key:"note-info-modal",className:"dialog-renderer__content note-info dialog",contentLabel:"Document",isOpen:!0,onRequestClose:n,overlayClassName:"dialog-renderer__overlay",portalClassName:"dialog-renderer__portal",shouldCloseOnOverlayClick:!1},a.createElement("div",{className:"note-info-panel note-info-stats"},a.createElement("div",{className:"note-info-header"},a.createElement("h2",{className:"panel-title"},"Document"),a.createElement("button",{type:"button","aria-label":"Close note info",className:"about-done button icon-button",onClick:n},a.createElement(c.A,null))),a.createElement("p",{className:"note-info-item"},a.createElement("span",{className:"note-info-item-text"},a.createElement("span",{className:"note-info-name"},"Last synced"),a.createElement("span",{className:"note-info-detail"},a.createElement(l,{noteId:e})))),s&&a.createElement("p",{className:"note-info-item"},a.createElement("span",{className:"note-info-item-text"},a.createElement("span",{className:"note-info-name"},"Modified"),a.createElement("span",{className:"note-info-detail"},a.createElement("time",{dateTime:new Date(s).toISOString()},new Date(s).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))))),a.createElement("p",{className:"note-info-item"},a.createElement("span",{className:"note-info-item-text"},a.createElement("span",{className:"note-info-name"},"Created"),a.createElement("span",{className:"note-info-detail"},a.createElement("time",{dateTime:new Date(o).toISOString()},new Date(o).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}))))),a.createElement("p",{className:"note-info-item"},a.createElement("span",{className:"note-info-item-text"},a.createElement("span",{className:"note-info-name"},"Words"),a.createElement("span",{className:"note-info-detail"},((t.content||"").replace(/[\u200B]+/,"").trim().replace(/['";:,.?¿\-!¡]+/g,"").match(/\S+/g)||[]).length))),a.createElement("p",{className:"note-info-item"},a.createElement("span",{className:"note-info-item-text"},a.createElement("span",{className:"note-info-name"},"Characters"),a.createElement("span",{className:"note-info-detail"},(t.content||"").replace(f,"_").length)))),a.createElement(E,null))}}(0,r.A)(N,"displayName","NoteInfo");var f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,T={onModalClose:g.A.ui.toggleNoteInfo},y=(0,o.Ng)((e=>{var t=e.data.notes.get(e.ui.openedNote);return{noteId:e.ui.openedNote,note:t,theme:(0,v.O4)(e)}}),T)(N),O=n(4452),w=n.n(O),b=n(4544),A=n.n(b),_=n(17243),S=n(100),C=n.n(S),R=function(e){var{container:t,linkText:n,text:r}=e,o=(0,a.useRef)(),s=(0,a.useRef)(),i=(0,a.useRef)(),l=()=>{u(!0)},[c,u]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{if(c){var e=setTimeout((()=>u(!1)),4e3);return()=>clearTimeout(e)}}),[c]),(0,a.useEffect)((()=>{s.current=()=>r,i.current=l}),[r,l]),(0,a.useEffect)((()=>{var e=new(C())(o.current,{container:(null==t?void 0:t.current)||void 0,text:()=>s.current()});return e.on("success",(()=>i.current())),()=>e.destroy()}),[]),a.createElement("button",{ref:o,type:"button",className:"button button-borderless"},c?"Copied!":n)},I=n(68102),D=n(81515);function L(){return a.createElement("svg",{className:"checked-checkbox",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M19 3H5A2 2 0 0 0 3 5V19a2 2 0 0 0 2 2H19a2 2 0 0 0 2-2V5A2 2 0 0 0 19 3ZM10.14 16.85 5.76 12.48l1.42-1.42 3 3 6.63-6.63 1.41 1.42Z"}))}function k(){return a.createElement("svg",{className:"unchecked-checkbox",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M19 5h0V19H5V5H19m0-2H5A2 2 0 0 0 3 5V19a2 2 0 0 0 2 2H19a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Z"}))}var M=["className","isStandard","checked"],x=function(e){var{className:t,isStandard:n,checked:r}=e,o=(0,D.A)(e,M);return a.createElement("span",{className:w()("checkbox-control",[t,{"checkbox-standard":n}])},a.createElement("input",(0,I.A)({type:"checkbox"},o,{checked:r})),n?r?a.createElement(L,null):a.createElement(k,null):a.createElement("span",{className:"checkbox-control-base"},a.createElement("span",{className:"checkbox-control-checked"})))},G=n(84099);class P extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"isMounted",!1),(0,r.A)(this,"containerRef",a.createRef()),(0,r.A)(this,"handleFocusTrapDeactivate",(()=>{var{onFocusTrapDeactivate:e}=this.props;this.isMounted&&setTimeout((()=>e()),200)})),(0,r.A)(this,"getNoteLink",((e,t)=>{var{title:n}=(0,u.Ay)(e);return"[".concat(n,"](simplenote://note/").concat(t,")")})),(0,r.A)(this,"getPublishURL",(e=>(0,_.isEmpty)(e)?null:"http://simp.ly/p/".concat(e))),(0,r.A)(this,"pinNote",(e=>this.props.pinNote(this.props.noteId,e))),(0,r.A)(this,"publishNote",(e=>this.props.publishNote(this.props.noteId,e))),(0,r.A)(this,"markdownNote",(e=>this.props.markdownNote(this.props.noteId,e)))}componentDidMount(){this.isMounted=!0}componentWillUnmount(){this.isMounted=!1}render(){var{hasRevisions:e,isMarkdown:t,isPinned:n,noteId:r,note:o}=this.props,s=(0,_.includes)(o.systemTags,"published"),i=this.getPublishURL(o.publishURL),l=this.getNoteLink(o,r);return a.createElement(A(),{focusTrapOptions:{clickOutsideDeactivates:!0,onDeactivate:this.handleFocusTrapDeactivate}},a.createElement("div",{className:"note-actions",ref:this.containerRef},a.createElement("div",{className:"note-actions-panel"},a.createElement("label",{className:"note-actions-item",htmlFor:"note-actions-pin-checkbox"},a.createElement("span",{className:"note-actions-item-text"},a.createElement("span",{className:"note-actions-name"},"Pin to top")),a.createElement("span",{className:"note-actions-item-control"},a.createElement(x,{id:"note-actions-pin-checkbox",checked:n,isStandard:!0,onChange:()=>{this.pinNote(!n)}}))),a.createElement("label",{className:"note-actions-item",htmlFor:"note-actions-markdown-checkbox"},a.createElement("span",{className:"note-actions-item-text"},a.createElement("span",{className:"note-actions-name"},"Markdown")),a.createElement("span",{className:"note-actions-item-control"},a.createElement(x,{id:"note-actions-markdown-checkbox",checked:t,isStandard:!0,onChange:()=>{this.markdownNote(!t)}}))),a.createElement("div",{className:"note-actions-item note-actions-internal-link"},a.createElement(R,{container:this.containerRef,text:l,linkText:"Copy Internal Link"})),e&&a.createElement("div",{className:"note-actions-item"},a.createElement("button",{className:"button button-borderless",onClick:this.props.toggleRevisions},"History…")),e||a.createElement("div",{className:"note-actions-item note-actions-item-disabled"},a.createElement("span",{className:"note-actions-disabled"},"History (unavailable)"))),a.createElement("div",{className:"note-actions-panel note-actions-public-link"},a.createElement("label",{className:"note-actions-item",htmlFor:"note-actions-publish-checkbox"},a.createElement("span",{className:"note-actions-item-text"},a.createElement("span",{className:"note-actions-name"},"Publish")),a.createElement("span",{className:"note-actions-item-control"},a.createElement(x,{id:"note-actions-publish-checkbox",checked:s,isStandard:!0,onChange:()=>{this.publishNote(!s)}}))),a.createElement("div",{className:w()("note-actions-item",{"note-actions-item-disabled":!s||!i})},s&&i?a.createElement(R,{container:this.containerRef,text:i,linkText:"Copy Link"}):s&&!i?a.createElement(a.Fragment,null,a.createElement("span",{className:"note-actions-disabled"},"Copy Link"),a.createElement(G.A,{isWhite:!1,size:16,thickness:5})):a.createElement("span",{className:"note-actions-disabled"},"Copy Link"))),a.createElement("div",{className:"note-actions-panel"},a.createElement("div",{className:"note-actions-item"},a.createElement("button",{className:"button button-borderless",onClick:this.props.shareNote},"Collaborate…"))),a.createElement("div",{className:"note-actions-panel"},a.createElement("div",{className:"note-actions-item note-actions-trash"},a.createElement("button",{className:"button button-borderless",onClick:this.props.trashNote},"Move to Trash")))))}}(0,r.A)(P,"displayName","NoteActions");var H={markdownNote:g.A.data.markdownNote,onFocusTrapDeactivate:g.A.ui.closeNoteActions,pinNote:g.A.data.pinNote,publishNote:g.A.data.publishNote,shareNote:()=>g.A.ui.showDialog("SHARE"),toggleRevisions:g.A.ui.toggleRevisions,trashNote:g.A.ui.trashOpenNote},V=(0,o.Ng)((e=>{var t,{data:n,ui:{openedNote:a}}=e,r=n.notes.get(a);return{noteId:a,note:r,hasRevisions:!(null===(t=n.noteRevisions.get(a))||void 0===t||!t.size),isMarkdown:null==r?void 0:r.systemTags.includes("markdown"),isPinned:null==r?void 0:r.systemTags.includes("pinned")}}),H)(P),F=n(53570);function U(){return a.createElement("svg",{className:"icon-connection",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M12 15c1.1 0 2.09 0.44 2.81 1.16L12 18.97l-2.81-2.81C9.91 15.44 10.9 15 12 15zM2.12 9.09l1.41 1.41C5.7 8.34 8.69 7 12 7s6.3 1.34 8.47 3.5l1.41-1.41C19.35 6.56 15.86 5 12 5S4.65 6.56 2.12 9.09zM5.65 12.62l1.41 1.41C8.33 12.78 10.07 12 12 12s3.67 0.78 4.93 2.04l1.41-1.41C16.72 11 14.48 10 12 10S7.28 11 5.65 12.62z"}))}function j(){return a.createElement("svg",{className:"icon-no-connection",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M10.88 7.06L9.13 5.3C10.05 5.1 11.01 5 12 5c3.86 0 7.35 1.56 9.88 4.09l-1.41 1.41C18.3 8.34 15.31 7 12 7 11.62 7 11.25 7.02 10.88 7.06zM18.35 12.62c-1.16-1.15-2.63-1.98-4.27-2.37l3.32 3.32L18.35 12.62zM11.05 10.05L8.52 7.52 6.95 5.95 3.51 2.51 2.1 3.93l2.95 2.95C3.98 7.49 2.98 8.22 2.12 9.09l1.41 1.41C4.4 9.63 5.42 8.92 6.52 8.35l2.25 2.25c-1.18 0.45-2.24 1.15-3.12 2.02l1.41 1.41c0.9-0.89 2.03-1.53 3.3-1.84l3.08 3.08C13 15.11 12.51 15 12 15c-1.1 0-2.09 0.44-2.81 1.16L12 18.97l2.57-2.57 4.5 4.5 1.41-1.41 -7.39-7.39L11.05 10.05z"}))}var B=(0,o.Ng)((e=>({connectionStatus:e.simperium.connectionStatus})))((e=>{var{connectionStatus:t}=e;return a.createElement("div",{className:"navigation-bar__footer-item"},a.createElement(F.A,{enterDelay:200,classes:{tooltip:"icon-button__tooltip"},title:"green"===t?"Simplenote is communicating with the server.":"offline"===t?"Simplenote is operating in offline mode and changes won't be synchronized with the server until it connects again.":"Simplenote hasn't communicated with the server in a while; changes may not be synchronized with the server until the connection improves."},a.createElement("p",null,"green"===t?a.createElement(U,null):a.createElement(j,null),a.createElement("span",{className:"server-connection__label"},"Server connection"))))})),z=n(59874),W=n(62688),Y=n.n(W),K=e=>{var{icon:t,isSelected:n=!1,label:r,onClick:o}=e,s=w()("navigation-bar-item",{"is-selected":n});return a.createElement("div",{className:s},a.createElement("button",{type:"button",className:"button",onClick:o},a.createElement("span",{className:"navigation-bar-item__icon"},t),r))};K.propTypes={icon:Y().element.isRequired,isSelected:Y().bool,label:Y().string.isRequired,onClick:Y().func.isRequired};var q=K,Q=n(85373);function Z(){return a.createElement("svg",{className:"icon-reorder",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M19,8H5V6H19Zm2,3H3v2H21Zm-2,5H5v2H19Z"}))}var X={renameTag:g.A.data.renameTag},J=(0,o.Ng)(null,X)((e=>{var{editable:t,isSelected:n,onClick:r,renameTag:o,tagName:s}=e,[i,l]=(0,a.useState)(s),c=w()("tag-list-input",{"is-selected":n});return t?a.createElement("input",{className:c,readOnly:!t,onClick:r,value:i,onChange:e=>{l(e.target.value.replace(/[\s,]/g,""))},onBlur:e=>{var t,n=null===(t=e.target)||void 0===t?void 0:t.value.trim();n&&n!==s?o(s,n):l(s)},spellCheck:!1}):a.createElement("button",{className:c,onClick:r},i)})),$=n(97099),ee=n(27528),te=n(62285),ne=(0,Q.D)((()=>a.createElement(Z,null))),ae=(0,Q.Zj)((e=>{var{allowReordering:t,editingActive:n,isSelected:r,selectTag:o,theme:s,trashTag:i,value:[l,c]}=e;return a.createElement("li",{key:l,className:w()("tag-list-item",{"is-selected":r}),"data-tag-name":c.name},a.createElement(J,{editable:n,isSelected:r,onClick:()=>!n&&o(c.name),tagName:c.name}),n&&a.createElement("button",{className:"icon-button button-trash"},a.createElement($.A,{onClick:()=>i(c.name)})),n&&t&&a.createElement("button",{className:"icon-button button-reorder"},a.createElement(ne,null)))})),re=(0,Q.q6)((e=>{var{editingTags:t,items:n,openedTagHash:r,openTag:o,sortTagsAlpha:s,theme:i,trashTheTag:l}=e;return a.createElement("ul",{className:"tag-list-items"},n.map(((e,n)=>a.createElement(ae,{key:e[0],allowReordering:!s,editingActive:t,index:n,isSelected:r===e[0],selectTag:o,theme:i,trashTag:l,value:e}))))}));class oe extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"reorderTag",(e=>{var{newIndex:t,nodes:n,oldIndex:a}=e,r=n[a].node.dataset.tagName;this.props.reorderTag(r,t)}))}render(){var{editingTags:e,onEditTags:t,openedTag:n,openTag:r,sortTagsAlpha:o,tags:s,theme:i,trashTag:l}=this.props,c=w()("tag-list",{"tag-list-editing":this.props.editingTags}),u=Array.from(s).filter((e=>{var[t,{name:n}]=e;return!(0,z.A)(n)})).sort(((e,t)=>{var[n,a]=e,[r,s]=t;return o?a.name.localeCompare(s.name):void 0!==a.index&&void 0!==s.index?a.index-s.index:void 0===a.index?1:-1}));return a.createElement("div",{className:c},a.createElement("div",{className:"tag-list-title"},a.createElement("h2",null,"Tags"),u.length>0&&a.createElement("button",{className:"tag-list-edit-toggle button button-borderless",tabIndex:0,onClick:t},e?"Done":"Edit")),a.createElement(re,{editingTags:e,lockAxis:"y",openedTagHash:n&&(0,te.YG)(n)||null,openTag:r,items:u,sortTagsAlpha:o,theme:i,onSortEnd:this.reorderTag,useDragHandle:!0,trashTheTag:l}))}}(0,r.A)(oe,"displayName","TagList");var se={onEditTags:ee.toggleTagEditing,openTag:ee.openTag,reorderTag:(e,t)=>({type:"REORDER_TAG",tagName:e,newIndex:t}),trashTag:e=>(0,ee.showDialog)("TRASH-TAG-CONFIRMATION",{tagName:e})},ie=(0,o.Ng)((e=>{var{data:t,settings:{sortTagsAlpha:n},ui:{editingTags:a}}=e;return{editingTags:a,openedTag:v.Q5(e),sortTagsAlpha:n,tags:t.tags,theme:v.O4(e)}}),se)(oe),le=n(38634);function ce(){return a.createElement("svg",{className:"icon-settings",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M15 22H9v-2.59c-0.689-0.277-1.336-0.651-1.92-1.11l-2.24 1.3 -3-5.2 2.24-1.29c-0.107-0.736-0.107-1.484 0-2.22L1.84 9.6l3-5.2 2.24 1.3C7.667 5.245 8.313 4.871 9 4.59V2h6v2.59c0.689 0.277 1.336 0.651 1.92 1.11l2.24-1.3 3 5.2 -2.24 1.29c0.107 0.736 0.107 1.484 0 2.22l2.24 1.29 -3 5.2 -2.24-1.3c-0.584 0.459-1.231 0.833-1.92 1.11V22zM11 20h2v-2l0.72-0.21c0.896-0.277 1.717-0.756 2.4-1.4l0.54-0.51 1.77 1 1-1.73 -1.77-1 0.17-0.72c0.227-0.913 0.227-1.867 0-2.78l-0.17-0.72 1.77-1 -1-1.74 -1.77 1 -0.54-0.52c-0.688-0.639-1.512-1.115-2.41-1.39L13 6V4h-2v2l-0.72 0.21C9.386 6.488 8.566 6.963 7.88 7.6L7.34 8.12l-1.77-1 -1 1.74 1.77 1 -0.17 0.72c-0.227 0.913-0.227 1.867 0 2.78l0.17 0.72 -1.77 1 1 1.73 1.77-1 0.54 0.51c0.685 0.643 1.51 1.119 2.41 1.39L11 18V20zM12 15.5c-1.933 0-3.5-1.567-3.5-3.5s1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5S13.933 15.5 12 15.5zM12 10.5c-0.828 0-1.5 0.672-1.5 1.5s0.672 1.5 1.5 1.5 1.5-0.672 1.5-1.5S12.828 10.5 12 10.5z"}))}var ue=n(64784),de=n(37453);class me extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"isMounted",!1),(0,r.A)(this,"handleFocusTrapDeactivate",(()=>{var{onFocusTrapDeactivate:e,showNavigation:t}=this.props;t&&this.isMounted&&e()})),(0,r.A)(this,"onHelpClicked",(()=>(0,de.i)("http://simplenote.com/help"))),(0,r.A)(this,"onSelectTrash",(()=>{this.props.selectTrash()})),(0,r.A)(this,"isSelected",(e=>{var{selectedRow:t}=e;return this.props.collection.type===t}))}componentDidMount(){this.isMounted=!0}componentWillUnmount(){this.isMounted=!1}render(){var{autoHideMenuBar:e,isDialogOpen:t,onAbout:n,onSettings:r,onShowAllNotes:o,onShowUntaggedNotes:s,tags:i}=this.props,l=Array.from(i).filter((e=>{var[t,{name:n}]=e;return!(0,z.A)(n)})).length;return a.createElement(A(),{paused:t,focusTrapOptions:{clickOutsideDeactivates:!0,onDeactivate:this.handleFocusTrapDeactivate}},a.createElement("div",{className:"navigation-bar"},a.createElement("div",{className:"navigation-bar__folders"},a.createElement(q,{icon:a.createElement(le.A,null),isSelected:this.isSelected({selectedRow:"all"}),label:"All Notes",onClick:o}),a.createElement(q,{icon:a.createElement($.A,null),isSelected:this.isSelected({selectedRow:"trash"}),label:"Trash",onClick:this.onSelectTrash}),a.createElement(q,{icon:a.createElement(ce,null),label:"Settings",onClick:r})),a.createElement("div",{className:"navigation-bar__tags"},l&&a.createElement(a.Fragment,null,a.createElement(ie,null),a.createElement("div",{className:"navigation-bar__folders navigation-bar__untagged"},a.createElement(q,{icon:a.createElement(ue.A,null),isSelected:this.isSelected({selectedRow:"untagged"}),label:"Untagged Notes",onClick:s})))||null),a.createElement("div",{className:"navigation-bar__tools"},a.createElement("div",{className:"navigation-bar__server-connection"},a.createElement(B,null))),a.createElement("div",{className:"navigation-bar__footer"},a.createElement("button",{type:"button",className:"navigation-bar__footer-item",onClick:this.props.showKeyboardShortcuts},"Keyboard Shortcuts")),a.createElement("div",{className:"navigation-bar__footer"},a.createElement("button",{type:"button",className:"navigation-bar__footer-item",onClick:this.onHelpClicked},"Help & Support"),a.createElement("button",{type:"button",className:"navigation-bar__footer-item",onClick:n},"About"))))}}(0,r.A)(me,"displayName","NavigationBar");var pe={onAbout:()=>g.A.ui.showDialog("ABOUT"),onFocusTrapDeactivate:g.A.ui.toggleNavigation,onShowAllNotes:g.A.ui.showAllNotes,onShowUntaggedNotes:g.A.ui.showUntaggedNotes,onSettings:()=>g.A.ui.showDialog("SETTINGS"),selectTrash:g.A.ui.selectTrash,showKeyboardShortcuts:()=>g.A.ui.showDialog("KEYBINDINGS")},ge=(0,o.Ng)((e=>{var{data:t,settings:n,ui:{collection:a,dialogs:r,showNavigation:o}}=e;return{autoHideMenuBar:n.autoHideMenuBar,collection:a,isDialogOpen:r.length>0,showNavigation:o,tags:t.tags}}),pe)(me),he=n(255),Ee=n(67893);function ve(){return a.createElement("svg",{className:"icon-new-note",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M9.707 12.879L19.59 3 21 4.41l-9.879 9.883L9 15 9.707 12.879zM18 18H6V6h7V4H6.002C4.896 4 4 4.896 4 6.002v11.996C4 19.104 4.896 20 6.002 20h11.996C19.104 20 20 19.104 20 17.998V11h-2V18z"}))}function Ne(){return a.createElement("svg",{className:"icon-menu",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M21 11H3v2H21Zm0-5H3V8H21Zm0 10H3v2H21Z"}))}var fe=n(48940),Te=e=>{var t,{collection:n,openedTag:r,onNewNote:o,searchQuery:s,toggleNavigation:i}=e;switch(n.type){case"tag":t=r;break;case"trash":t="Trash";break;case"untagged":t="Untagged Notes";break;default:t="All Notes"}var l=Ee.cX?"Cmd":"Ctrl";return a.createElement("div",{className:"menu-bar"},a.createElement(he.A,{icon:a.createElement(Ne,null),onClick:i,title:"Menu • ".concat(l,"+Shift+U")}),a.createElement("div",{id:"notes-title",className:"notes-title","aria-hidden":"true"},t),a.createElement(he.A,{icon:a.createElement(ve,null),onClick:()=>o((0,fe.C)(s)),title:"New Note • ".concat(l,"+Shift+I")}))};Te.displayName="MenuBar";var ye=(0,o.Ng)((e=>({collection:e.ui.collection,openedTag:v.Q5(e),searchQuery:e.ui.searchQuery})),(e=>({onNewNote:t=>{e((0,ee.createNote)(t))},toggleNavigation:()=>{e((0,ee.toggleNavigation)())}})))(Te);function Oe(){return a.createElement("svg",{className:"icon-back",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M21 11H6.83l5.72-5.72 -1.42-1.41L3 12l8.13 8.13 1.42-1.41L6.83 13H21V11z"}))}function we(){return a.createElement("svg",{className:"icon-checklist",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M21 11H11v2h10V11zM21 6H11v2h10V6zM21 16H11v2h10V16zM5.43 9.03L3 6.72l1.38-1.45 1.03 0.98L7.69 4 9.1 5.43 5.43 9.03zM5.43 14.51L3 12.21l1.38-1.45 1.03 0.97 2.28-2.24 1.41 1.42L5.43 14.51zM5.43 20L3 17.69l1.38-1.45 1.03 0.98 2.28-2.25L9.1 16.4 5.43 20z"}))}function be(){return a.createElement("svg",{className:"icon-ellipsis-outline",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12c0 5.514 4.486 10 10 10 5.514 0 10-4.486 10-10C22 6.486 17.514 2 12 2zM12 20c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8S16.411 20 12 20zM13.5 12c0 0.828-0.672 1.5-1.5 1.5s-1.5-0.672-1.5-1.5 0.672-1.5 1.5-1.5S13.5 11.172 13.5 12zM9 12c0 0.828-0.672 1.5-1.5 1.5S6 12.828 6 12s0.672-1.5 1.5-1.5S9 11.172 9 12zM18 12c0 0.828-0.672 1.5-1.5 1.5S15 12.828 15 12s0.672-1.5 1.5-1.5S18 11.172 18 12z"}))}function Ae(){return a.createElement("svg",{className:"icon-info",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10S17.523 22 12 22zM12 4c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8S16.418 4 12 4zM12 7c0.552 0 1 0.448 1 1s-0.448 1-1 1 -1-0.448-1-1S11.448 7 12 7zM11 11h2v6h-2V11z"}))}function _e(){return a.createElement("svg",{className:"icon-preview",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M12 15.5c-1.933 0-3.5-1.567-3.5-3.5s1.567-3.5 3.5-3.5 3.5 1.567 3.5 3.5S13.933 15.5 12 15.5zM12 10.5c-0.828 0-1.5 0.672-1.5 1.5s0.672 1.5 1.5 1.5 1.5-0.672 1.5-1.5S12.828 10.5 12 10.5zM12 19.5c-4.45-0.003-8.363-2.945-9.6-7.22L2.32 12l0.08-0.28c1.546-5.302 7.098-8.346 12.4-6.8 3.279 0.956 5.844 3.521 6.8 6.8L21.68 12l-0.08 0.28C20.363 16.555 16.45 19.497 12 19.5zM4.41 12c1.396 4.192 5.926 6.458 10.118 5.062 2.39-0.796 4.266-2.672 5.062-5.062 -1.396-4.192-5.926-6.458-10.118-5.062C7.082 7.734 5.206 9.61 4.41 12z"}))}function Se(){return a.createElement("svg",{className:"icon-preview-stop",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M15.43 12.66c0.381-1.878-0.834-3.709-2.712-4.09 -0.455-0.092-0.923-0.092-1.378 0L15.43 12.66zM9.64 6.87C10.403 6.626 11.199 6.501 12 6.5c3.452 0.004 6.511 2.221 7.59 5.5 -0.369 1.126-0.992 2.153-1.82 3l1.43 1.43c1.125-1.168 1.948-2.593 2.4-4.15L21.68 12l-0.08-0.28c-1.541-5.303-7.09-8.353-12.393-6.812C8.823 5.019 8.447 5.154 8.08 5.31L9.64 6.87zM19.61 19.59L3 3 1.6 4.41 4.8 7.6c-1.123 1.158-1.946 2.572-2.4 4.12L2.32 12l0.08 0.28c1.237 4.275 5.15 7.217 9.6 7.22 1.338-0.003 2.662-0.279 3.89-0.81L18.2 21 19.61 19.59zM12 17.5c-3.452-0.004-6.511-2.221-7.59-5.5 0.363-1.124 0.979-2.15 1.8-3l2.35 2.35C8.524 11.565 8.504 11.782 8.5 12c0 1.933 1.567 3.5 3.5 3.5 0.211-0.005 0.422-0.025 0.63-0.06l1.69 1.69C13.571 17.374 12.788 17.499 12 17.5z"}))}function Ce(){return a.createElement("svg",{className:"icon-sidebar",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M20 4H4A2 2 0 0 0 2 6V18a2 2 0 0 0 2 2H20a2 2 0 0 0 2-2V6A2 2 0 0 0 20 4ZM4 6H7V18H4ZM20 18H9V6H20Z"}))}class Re extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"renderNormal",(()=>{var{editMode:e,newNote:t,isOffline:n,markdownEnabled:r,note:o,toggleNoteActions:s,toggleNoteInfo:i}=this.props;return o?a.createElement("div",{"aria-label":"note actions",role:"toolbar",className:"note-toolbar"},a.createElement("div",{className:"note-toolbar__column-left"},a.createElement("div",{className:"note-toolbar__button new-note-toolbar__button-sidebar"},a.createElement(he.A,{icon:a.createElement(ve,null),onClick:()=>t(),title:"New Note • ".concat(Ee.Vh,"+Shift+I")})),a.createElement("div",{className:"note-toolbar__button note-toolbar__button-sidebar"},a.createElement(he.A,{icon:a.createElement(Ce,null),onClick:this.props.toggleFocusMode,title:"Toggle Focus Mode"})),a.createElement("div",{className:"note-toolbar__button note-toolbar-back"},a.createElement(he.A,{icon:a.createElement(Oe,null),onClick:this.props.toggleNoteList,title:"Back • ".concat(Ee.Vh,"+Shift+L")}))),n&&a.createElement("div",{className:"offline-badge"},"OFFLINE"),a.createElement("div",{className:"note-toolbar__column-right"},r&&a.createElement("div",{className:"note-toolbar__button"},a.createElement(he.A,{icon:e?a.createElement(_e,null):a.createElement(Se,null),onClick:this.props.toggleEditMode,title:"Preview • ".concat(Ee.Vh,"+Shift+P")})),a.createElement("div",{className:"note-toolbar__button"},a.createElement(he.A,{icon:a.createElement(we,null),onClick:()=>window.dispatchEvent(new Event("toggleChecklist")),title:"Insert Checklist • ".concat(Ee.Vh,"+Shift+C")})),a.createElement("div",{className:"note-toolbar__button"},a.createElement(he.A,{icon:a.createElement(Ae,null),onClick:i,title:"Info"})),a.createElement("div",{className:"note-toolbar__button"},a.createElement(he.A,{icon:a.createElement(be,null),onClick:s,title:"Actions"})))):a.createElement("div",{className:"note-toolbar-placeholder"})})),(0,r.A)(this,"renderTrashed",(()=>{var{isOffline:e}=this.props;return a.createElement("div",{className:"note-toolbar-trashed"},a.createElement("div",{className:"note-toolbar__column-left"},a.createElement(he.A,{icon:a.createElement(Oe,null),onClick:this.props.toggleNoteList,title:"Back • ".concat(Ee.Vh,"+Shift+L")})),e&&a.createElement("div",{className:"offline-badge"},"OFFLINE"),a.createElement("div",{className:"note-toolbar__column-right"},a.createElement("div",{className:"note-toolbar__button"},a.createElement("button",{type:"button",className:"button button-compact button-danger",onClick:this.props.deleteNoteForever},"Delete Forever")),a.createElement("div",{className:"note-toolbar__button"},a.createElement("button",{type:"button",className:"button button-primary button-compact",onClick:this.props.restoreNote},"Restore Note"))))}))}render(){var{"aria-hidden":e,note:t}=this.props;return a.createElement("div",{"aria-hidden":e,className:"note-toolbar-wrapper"},null!=t&&t.deleted?this.renderTrashed():this.renderNormal())}}(0,r.A)(Re,"displayName","NoteToolbar");var Ie={deleteNoteForever:g.A.ui.deleteOpenNoteForever,newNote:g.A.ui.createNote,restoreNote:g.A.ui.restoreOpenNote,toggleEditMode:g.A.ui.toggleEditMode,toggleFocusMode:g.A.settings.toggleFocusMode,toggleNoteActions:g.A.ui.toggleNoteActions,toggleNoteInfo:g.A.ui.toggleNoteInfo,toggleNoteList:g.A.ui.toggleNoteList},De=(0,o.Ng)((e=>{var t,{data:n,ui:{editMode:a,openedNote:r},simperium:{connectionStatus:o}}=e,s=r&&null!==(t=n.notes.get(r))&&void 0!==t?t:null;return{editMode:a,isOffline:"offline"===o,markdownEnabled:(null==s?void 0:s.systemTags.includes("markdown"))||!1,note:s}}),Ie)(Re),Le=n(39399);function ke(){return a.createElement("svg",{className:"icon-help-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),a.createElement("path",{d:"M8 0C3.582 0 0 3.582 0 8s3.582 8 8 8 8-3.582 8-8S12.418 0 8 0zM8 13c-0.552 0-1-0.448-1-1 0-0.552 0.448-1 1-1s1 0.448 1 1C9 12.552 8.552 13 8 13zM9 8.816V9v1H7V9 8c0-0.552 0.448-1 1-1s1-0.448 1-1c0-0.552-0.448-1-1-1S7 5.448 7 6H5c0-1.657 1.343-3 3-3s3 1.343 3 3C11 7.304 10.163 8.403 9 8.816z"}))}var Me=e=>{var{"aria-valuetext":t,disabled:n,min:r,max:o,value:s,onChange:i}=e;return a.createElement("input",{"aria-valuetext":t,"aria-label":"Select revision",className:"slider",disabled:n,type:"range",min:r,max:o,value:s,onChange:i})};class xe extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"onAcceptRevision",(()=>{var{noteId:e,revision:t,restoreRevision:n}=this.props;t&&n(e,t)})),(0,r.A)(this,"onSelectRevision",(e=>{var{target:{value:t}}=e,{revisions:n}=this.props,a=parseInt(t,10),r=[...n.keys()][a];this.props.openRevision(this.props.noteId,r)})),(0,r.A)(this,"onCancelRevision",(()=>{this.props.cancelRevision()}))}render(){var{isViewingRevisions:e,note:t,openedRevision:n,revisions:r,restoreDeletedTags:o,toggleRestoringDeletedTags:s}=this.props;if(!e)return null;var i=r&&n?[...r.keys()].indexOf(n):-1,l=!n||n&&i===(null==r?void 0:r.size)-1,c=Number(100*((-1===i?(null==r?void 0:r.size)-1:i)-1)/((null==r?void 0:r.size)-2)),u="calc(".concat(c,"% + (").concat(8-.15*c,"px))"),d=(0,Le.GP)(1e3*(n?r.get(n).modificationDate:t.modificationDate),"MMM d, yyyy h:mm a"),m=w()("revision-selector",{"is-visible":e});return a.createElement(A(),{focusTrapOptions:{clickOutsideDeactivates:!0,fallbackFocus:"body",onDeactivate:this.onCancelRevision}},a.createElement("div",{className:m,role:"dialog","aria-labelledby":"revision-slider-title"},a.createElement("div",{className:"revision-selector-inner"},a.createElement("div",{id:"revision-slider-title",className:"revision-slider-title"},"History"),a.createElement("div",{"aria-hidden":!0,className:"revision-date",style:{left:u}},d),a.createElement("div",{className:"revision-slider"},a.createElement(Me,{"aria-valuetext":"Revision from ".concat(d),disabled:!r||0===r.size,min:1,max:(null==r?void 0:r.size)-1,value:i>-1?i:(null==r?void 0:r.size)-1,onChange:this.onSelectRevision})),a.createElement("section",{className:"revision-actions"},a.createElement("label",{className:"revision-deleted-tags-label",htmlFor:"revision-deleted-tags-checkbox"},a.createElement(x,{id:"revision-deleted-tags-checkbox",checked:o,isStandard:!0,onChange:s}),a.createElement("span",{className:"revision-deleted-tags-text"},"Restore deleted tags"),a.createElement("span",null,a.createElement(he.A,{icon:a.createElement(ke,null),title:"Any deleted tags associated with the restored version of this note will be re-added to your list of tags."}))),a.createElement("div",{className:"revision-buttons"},a.createElement("button",{className:"button button-secondary button-compact",onClick:this.onCancelRevision},"Cancel"),a.createElement("button",{"aria-label":"Restore revision from ".concat(d),disabled:l,className:"button button-primary button-compact",onClick:this.onAcceptRevision},"Restore"))))))}}var Ge={openRevision:(e,t)=>({type:"OPEN_REVISION",noteId:e,version:t}),cancelRevision:()=>({type:"CLOSE_REVISION"}),restoreRevision:(e,t)=>({type:"RESTORE_NOTE_REVISION",noteId:e,note:t}),toggleRestoringDeletedTags:g.A.ui.toggleRestoringDeletedTags},Pe=(0,o.Ng)((e=>{var t,n,a,r,o,s=e.ui.openedNote,i=(null===(t=e.ui.openedRevision)||void 0===t?void 0:t[0])===e.ui.openedNote&&null!==(n=null===(a=e.ui.openedRevision)||void 0===a?void 0:a[1])&&void 0!==n?n:null,l=e.ui.restoreDeletedTags;return{isViewingRevisions:e.ui.showRevisions,noteId:s,note:null!==(r=e.data.notes.get(s))&&void 0!==r?r:null,openedRevision:i,revision:s&&i?(0,v.qB)(e,s,i,l):null,revisions:null!==(o=e.data.noteRevisions.get(s))&&void 0!==o?o:null,restoreDeletedTags:l}}),Ge)(xe);function He(){return a.createElement("svg",{className:"icon-search-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),a.createElement("path",{d:"M6.54 12c-3.037 0.022-5.518-2.423-5.54-5.46s2.423-5.518 5.46-5.54S11.978 3.423 12 6.46c0 0.027 0 0.053 0 0.08C11.978 9.546 9.546 11.978 6.54 12zM6.54 3C4.607 2.978 3.022 4.527 3 6.46 2.978 8.393 4.528 9.978 6.46 10 8.393 10.022 9.978 8.473 10 6.54c0.022-1.933-1.527-3.518-3.46-3.54C6.54 3 6.54 3 6.54 3zM10.939 12.349l1.414-1.414 2.616 2.616 -1.414 1.414L10.939 12.349z"}))}var Ve=new Set,Fe=()=>e=>t=>{var n=e(t);switch(t.type){case"SEARCH":Ve.forEach((e=>e()));break;case"FOCUS_SEARCH_FIELD":Ve.forEach((e=>e("select")))}return n};class Ue extends a.Component{constructor(){var e;super(...arguments),e=this,(0,r.A)(this,"inputField",(0,a.createRef)()),(0,r.A)(this,"blur",(()=>{this.inputField.current&&this.inputField.current.blur()})),(0,r.A)(this,"focus",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"focus-only";e.inputField.current&&("select"===t&&e.inputField.current.select(),e.inputField.current.focus())})),(0,r.A)(this,"interceptEsc",(e=>{27===e.keyCode&&(""===this.props.searchQuery&&this.blur(),this.clearQuery())})),(0,r.A)(this,"update",(e=>{var{currentTarget:{value:t}}=e;this.props.onSearch(t)})),(0,r.A)(this,"clearQuery",(()=>this.props.onSearch("")))}componentDidMount(){var e;e=this.focus,Ve.add(e)}render(){var{openedTag:e,searchQuery:t}=this.props,n=t.length>0;return a.createElement("div",{className:"search-field"},a.createElement("button",{"aria-label":"Focus search field",onClick:this.props.focusSearchField,className:"icon-button"},a.createElement(He,null)),a.createElement("input",{ref:this.inputField,type:"search",placeholder:"Search all notes and tags",onChange:this.update,onKeyUp:this.interceptEsc,value:t,spellCheck:!1}),n&&a.createElement("button",{"aria-label":"Clear search",className:"icon-button",onClick:this.clearQuery},a.createElement(c.A,null)))}}(0,r.A)(Ue,"displayName","SearchField");var je=(0,o.Ng)((e=>({openedTag:v.Q5(e),searchQuery:e.ui.searchQuery})),(e=>({focusSearchField:()=>e((0,ee.focusSearchField)()),onSearch:t=>{e((0,ee.search)(t))}})))(Ue),Be=n(38711),ze=n(94541),We=n(70103);class Ye extends a.Component{render(){var{note:e,noteId:t,tags:n,"aria-hidden":r}=this.props;return a.createElement("div",{"aria-hidden":r,className:"note-revisions"},a.createElement(ze.default,{noteId:t,note:e}),a.createElement("div",{className:"note-revisions-tag-list"},n.map((e=>{var{name:t,deleted:n}=e;return a.createElement(We.A,{key:t,tagName:t,interactive:!1,deleted:n})}))))}}(0,r.A)(Ye,"displayName","NoteRevisions");var Ke=(0,o.Ng)(((e,t)=>{var n,a,r=null!==(n=t.noteId)&&void 0!==n?n:e.ui.openedNote,o=null!==(a=t.note)&&void 0!==a?a:e.data.notes.get(r),s=e.ui.restoreDeletedTags;return{tags:(0,v.g7)(e,o).map((t=>{var n=(0,te.YG)(t);return{name:t,deleted:!e.data.tags.has(n)}})).filter((e=>s||!e.deleted)),noteId:r,note:o}}))(Ye),qe=n(58254),Qe=e=>{var{children:t,delay:n=1e3}=e,[r,o]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{var e=window.setTimeout((()=>{o(!0)}),n);return()=>window.clearTimeout(e)}),[]),a.createElement(qe.A,{classNames:"transition-delay-enter",in:r,mountOnEnter:!0,timeout:200,unmountOnExit:!0},t)},Ze=a.lazy((()=>Promise.all([n.e(5122),n.e(5368)]).then(n.bind(n,61716)))),Xe=a.lazy((()=>Promise.all([n.e(8849),n.e(9403)]).then(n.bind(n,12172))));class Je extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"openKeybindingsHelp",(e=>{if(this.props.keyboardShortcuts){var{hideKeyboardShortcuts:t,keyboardShortcutsAreOpen:n,showKeyboardShortcuts:a}=this.props,{ctrlKey:r,metaKey:o}=e,s=e.key.toLowerCase();(r||o)&&"/"===s&&(n?t():a(),e.stopPropagation(),e.preventDefault())}})),(0,r.A)(this,"render",(()=>{var{showNoteList:e,hasRevisions:t,isFocusMode:n=!1,isNavigationOpen:r,isNoteInfoOpen:o,isNoteOpen:s,isSmallScreen:i,openedNote:l,openedRevision:c,showRevisions:u}=this.props,d=w()("app-layout",{"is-focus-mode":n,"is-navigation-open":r,"is-note-open":s,"is-showing-note-info":o}),m=!(e&&i),p=a.createElement(Qe,{delay:1e3},a.createElement("div",{className:"app-layout__placeholder"},a.createElement(Be.A,null))),g=!!u||void 0;return a.createElement("div",{className:d,"aria-hidden":!!r||void 0},a.createElement(a.Suspense,{fallback:p},a.createElement("aside",{"aria-hidden":g,"aria-label":"Notes list",className:"app-layout__source-column"},a.createElement(ye,null),a.createElement(je,null),a.createElement(Ze,null)),m&&a.createElement("main",{"aria-label":"Note editor",className:"app-layout__note-column"},a.createElement(De,{"aria-hidden":g}),u?a.createElement(Ke,{"aria-hidden":g,noteId:l,note:c}):a.createElement(Xe,null),t&&a.createElement(Pe,null))))}))}componentDidMount(){window.addEventListener("keydown",this.openKeybindingsHelp,!1)}componentWillUnmount(){window.removeEventListener("keydown",this.openKeybindingsHelp,!1)}}var $e={hideKeyboardShortcuts:()=>g.A.ui.closeDialog("KEYBINDINGS"),showKeyboardShortcuts:()=>g.A.ui.showDialog("KEYBINDINGS")},et=(0,o.Ng)((e=>{var t,n,a,r;return{hasRevisions:e.ui.showRevisions&&e.data.noteRevisions.has(e.ui.openedNote),keyboardShortcutsAreOpen:v.R_(e,"KEYBINDINGS"),keyboardShortcuts:e.settings.keyboardShortcuts,isFocusMode:e.settings.focusModeEnabled,isNavigationOpen:e.ui.showNavigation,isNoteInfoOpen:e.ui.showNoteInfo,isNoteOpen:!e.ui.showNoteList,isSmallScreen:v.Qv(e),openedRevision:(null===(t=e.ui.openedRevision)||void 0===t?void 0:t[0])===e.ui.openedNote&&null!==(n=null===(a=e.data.noteRevisions.get(e.ui.openedNote))||void 0===a?void 0:a.get(null===(r=e.ui.openedRevision)||void 0===r?void 0:r[1]))&&void 0!==n?n:null,openedNote:e.ui.openedNote,showNoteList:e.ui.showNoteList,showRevisions:e.ui.showRevisions}}),$e)(Je),tt=e=>a.createElement("div",(0,I.A)({className:"dev-badge"},e),"DEV"),nt=n(3470),at=n(43767),rt=n(84593),ot=n(79709);class st extends a.Component{render(){var{closeDialog:e}=this.props;return a.createElement("div",{className:"about"},a.createElement(ot.A,{hideTitleBar:!0,onDone:e,title:"Beta Release"},a.createElement("div",{className:"about-top"},a.createElement(at.A,null),a.createElement("h1",null,"Simplenote")),a.createElement("p",{style:{textAlign:"center"}},"This is a beta release of Simplenote."),a.createElement("p",{style:{textAlign:"center"}},"This release provides an opportunity to test and share early feedback for a major overhaul of the internals of the app."),a.createElement("p",{style:{textAlign:"center"}},"Please use with caution and the understanding that ",a.createElement("br",null),"this comes without any stability guarantee."),a.createElement("button",{type:"button","aria-label":"Close dialog",className:"about-done button",onClick:e},a.createElement(rt.A,null))))}}var it={closeDialog:ee.closeDialog},lt=(0,o.Ng)(null,it)(st);function ct(){return a.createElement("svg",{className:"icon-attention",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),a.createElement("path",{d:"M14.72 11.75 9.3 2.28a1.49 1.49 0 0 0-2.6 0L1.28 11.75A1.51 1.51 0 0 0 2.59 14H13.41A1.51 1.51 0 0 0 14.72 11.75ZM8 13a1 1 0 1 1 1-1A1 1 0 0 1 8 13ZM9 9A1 1 0 0 1 7 9V5A1 1 0 0 1 9 5Z"}))}var ut=e=>{var t=[];return e.data.notes.forEach(((n,a)=>{var r,o=null===(r=e.simperium.ghosts[1].get("note"))||void 0===r?void 0:r.get(a);o&&(0,v.Yt)(n,o.data)||t.push(a)})),t},dt=e=>({notes:ut(e),preferences:[],tags:[]}),mt=n(22249),pt=n.n(mt),gt=e=>e.replace(/\r\n/g,"\n").replace(/\n/g,"\r\n"),ht=n(61132),Et=n.n(ht);function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=e=>Nt(Nt({},e),{},{fileName:e.content.split("\n").map((e=>e.trim())).map(Et()).filter(_.identity).concat("untitled").shift().slice(0,40)}),Tt=e=>{if(!e.tags)return e;var t=e.tags.reduce(((e,t)=>{var[n,a]=e;return a.length+t.length>75?[[...n,a],t]:[n,"".concat(a,", ").concat(t)]}),[[],""]).reduce(((e,t)=>[...e,t])).map((e=>e.replace(/^, /,"")));return Nt(Nt({},e),{},{content:"".concat(e.content,"\n\nTags:\n  ").concat(t.join("\n  "))})},yt=(e,t)=>{var n,[a,r]=e,o=null!==(n=r.get(t.fileName))&&void 0!==n?n:0;r.set(t.fileName,o+1);var s=o>0?"".concat(t.fileName," (").concat(o,")"):t.fileName;return[[...a,Nt(Nt({},t),{},{fileName:s})],r]},Ot=e=>n.e(211).then(n.t.bind(n,22658,23)).then((t=>{var{default:n}=t,a=new n;return a.file("source/notes.json",gt(JSON.stringify(e,null,2))),e.activeNotes.map(Tt).map(ft).reduce(yt,[[],new Map]).shift().forEach((e=>{var{content:t,fileName:n,lastModified:r}=e;a.file("".concat(n,".txt"),t,{date:new Date(r)})})),e.trashedNotes.map(Tt).map(ft).reduce(yt,[[],new Map]).shift().forEach((e=>{var{content:t,fileName:n,lastModified:r}=e;a.file("trash/".concat(n,".txt"),t,{date:new Date(r)})})),a})).catch(console.log),wt=e=>(e=>{var t=[],n=[];return[...e.entries()].forEach((e=>{var[a,r]=e,[o,s]=(0,_.partition)((0,_.sortBy)(r.tags,(e=>e.toLocaleLowerCase())),z.A),i=Object.assign({id:a,content:gt(r.content),creationDate:new Date(1e3*r.creationDate).toISOString(),lastModified:new Date(1e3*r.modificationDate).toISOString()},r.systemTags.includes("pinned")&&{pinned:!0},r.systemTags.includes("markdown")&&{markdown:!0},s.length&&{tags:s},r.systemTags.includes("published")&&(null==r?void 0:r.publishURL)&&{publicURL:"http://simp.ly/p/".concat(r.publishURL)},r.systemTags.includes("shared")&&o.length&&{collaboratorEmails:o});r.deleted?n.push(i):t.push(i)})),Promise.resolve({activeNotes:t,trashedNotes:n})})(e).then(Ot).then((e=>e.generateAsync({compression:"DEFLATE",platform:(0,_.get)(window,"process.platform","DOS"),type:"blob"}))).then((e=>pt()(e,"notes.zip"))).catch(console.log);class bt extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"exportUnsyncedNotes",(()=>{var{closeDialog:e,notes:t}=this.props;wt(t).then(e)}))}render(){var{description:e,unsafeAction:t,safeAction:n,closeDialog:r,action:o,notes:s}=this.props;return a.createElement("div",{className:"logoutConfirmation"},a.createElement(ot.A,{onDone:r,title:"Unsynchronized Notes"},a.createElement("p",{className:"explanation"},s.size>0?e:"All notes have synchronized!"),s.size>0&&a.createElement(a.Fragment,null,a.createElement("p",{className:"explanation-secondary"},"Possibly unsynchronized notes"),a.createElement("section",{className:"change-list"},a.createElement("ul",null,[...s.entries()].map((e=>{var[t,n]=e,{title:r,preview:o}=(0,u.Cb)(n);return a.createElement("li",{key:t},a.createElement(ct,null),a.createElement("span",{className:"note-title"},r))}))))),s.size>0&&a.createElement("button",{className:"export-unsynchronized",onClick:this.exportUnsyncedNotes},"Export unsynchronized notes"),a.createElement("section",{className:"action-button"},a.createElement("button",{className:"log-out",onClick:o},s.size>0?t:n))))}}var At={closeDialog:ee.closeDialog},_t=(0,o.Ng)((e=>{var t=dt(e);return{notes:new Map(t.notes.map((t=>[t,e.data.notes.get(t)])))}}),At)(bt),St={reallyCloseWindow:g.A.electron.reallyCloseWindow},Ct=(0,o.Ng)(null,St)((e=>{var{reallyCloseWindow:t}=e;return a.createElement(_t,{description:"Closing the app with unsynchronized notes could cause data loss.",unsafeAction:"Close anyway",safeAction:"Safely close app",action:t})})),Rt=n(98142);function It(){return a.createElement("svg",{className:"icon-cloud",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M17.5 19H7A5 5 0 0 1 6.92 9 5.58 5.58 0 0 1 12.1 5.5 5.64 5.64 0 0 1 17.59 10a4.5 4.5 0 0 1-0.09 9ZM12.1 7.5a3.59 3.59 0 0 0-3.49 2.74L8.43 11H7a3 3 0 0 0 0 6H17.5a2.5 2.5 0 0 0 0-5H15.72l0-1A3.62 3.62 0 0 0 12.1 7.5Z"}))}function Dt(){return a.createElement("svg",{className:"icon-file-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),a.createElement("path",{d:"M9 0H4.001C2.896 0 2 0.896 2 2.001v11.997C2 15.104 2.896 16 4.001 16h7.997C13.104 16 14 15.104 14 13.999V5L9 0zM8 6V1l5 5H8z"}))}var Lt={name:"simplenote",fileTypes:["json"]},kt={name:"evernote",fileTypes:["enex"]},Mt={name:"text-files",fileTypes:["txt","md"]},xt=[Lt,kt,Mt],Gt=e=>{switch(e.substring(e.lastIndexOf(".")+1,e.length)||e){case"json":return Lt;case"enex":return kt;case"txt":case"md":return Mt}throw new Error("No importer found for file ".concat(e))},Pt=n(64693);function Ht(e){var{acceptedTypes:t,locked:n,multiple:r,onAccept:o,onReset:s}=e,[i,l]=(0,a.useState)(),[c,u]=(0,a.useState)(new Array),d=(0,a.useCallback)(((e,t)=>{0===e.length?(e=>{!r&&e.length>1?u([...c,"Choose a single file"]):u([...c,"File type is incorrect"]),l(void 0),s()})(t):(e=>{for(var t=[],n=0;n<e.length;n++){var a=e[n];Gt(a.name)?t.push(a):u([...c,'The file type for "'.concat(a.name,'" is not recognized')])}l(t),o(t)})(e)}),[]),{getRootProps:m,getInputProps:p,isDragActive:g}=(0,Rt.VB)({accept:t,disabled:n,multiple:r,onDrop:d}),h=()=>a.createElement(a.Fragment,null,c.length>0?a.createElement(Pt.A,null):a.createElement(It,null),g?"Drop files here":a.createElement("div",{className:"drop-instructions"},"Drag and drop to select files or ",a.createElement("span",null,"browse")," to choose")),E=()=>{var e=i.map((e=>a.createElement("li",{key:e.name,title:e.name},a.createElement(Dt,null),a.createElement("span",null,e.name)))),t=c.map((e=>a.createElement("li",{key:e},a.createElement(Pt.A,null),e)));return a.createElement(a.Fragment,null,a.createElement("div",{className:"accepted-files-header"},i.length>1?"Import Files":"Import File"),a.createElement("ul",{className:"accepted-files"},e),c.length>0&&a.createElement("ul",{className:"error-message"},t))};return a.createElement("div",(0,I.A)({},m(),{className:w()({"is-accepted":i},"importer-dropzone")}),a.createElement("input",p()),i?a.createElement(E,null):a.createElement(h,null))}Ht.propTypes={acceptedTypes:Y().string,locked:Y().bool.isRequired,multiple:Y().bool,onAccept:Y().func.isRequired,onReset:Y().func.isRequired};var Vt=Ht,Ft=e=>{var{children:t,shouldMount:n,wrapperClassName:r=""}=e;return a.createElement(qe.A,{in:n,classNames:"transition-fade-in-out",mountOnEnter:!0,timeout:200,unmountOnExit:!0},a.createElement("div",{className:r},t))},Ut=e=>{var{children:t,headingLevel:n=3}=e;return(0,a.createElement)("h".concat(n),{className:"panel-title"},t)},jt=["className","onChange"],Bt=e=>{var{className:t,onChange:n}=e,r=(0,D.A)(e,jt);return a.createElement("span",{className:w()("toggle-control",[t])},a.createElement("input",(0,I.A)({type:"checkbox",onChange:e=>{var{currentTarget:{checked:t}}=e;return n(t)}},r)),a.createElement("span",{className:"toggle-control-layers"},a.createElement("span",{className:"toggle-control-unchecked-color"}),a.createElement("span",{className:"toggle-control-checked-color"}),a.createElement("span",{className:"toggle-control-knob"})))},zt=n(50662),Wt=e=>a.createElement(zt.A,(0,I.A)({classes:{root:"progress-bar",bar:"progress-bar__bar"}},e));class Yt extends a.Component{shouldComponentUpdate(e){return!(!this.props.endValue&&this.props.isDone===e.isDone)}render(){var{currentValue:e,endValue:t,isDone:n}=this.props,r=()=>n?a.createElement(Wt,{variant:"determinate",value:100}):a.createElement(Wt,null);return t?a.createElement(Wt,{variant:"determinate",value:e/t*100}):a.createElement(r,null)}}(0,r.A)(Yt,"propTypes",{currentValue:Y().number.isRequired,endValue:Y().number,isDone:Y().bool.isRequired});var Kt=Yt,qt=e=>{var t,{currentValue:n,isDone:r}=e,o=1===n?"note":"notes";return t=r?"Done! ".concat(n," ").concat(o," imported."):n?"".concat(n," ").concat(o," imported..."):"Importing...",a.createElement("p",{role:"status","aria-live":"polite"},t)};qt.propTypes={currentValue:Y().number.isRequired,isDone:Y().bool.isRequired};var Qt=qt,Zt=e=>{var{currentValue:t=0,endValue:n=0,isDone:r}=e;return a.createElement("section",{className:"import-progress"},a.createElement(Kt,{currentValue:t,endValue:r?t:n,isDone:r}),a.createElement(Qt,{currentValue:t,isDone:r}))},Xt=n(45841),Jt=n(96827);class $t extends Jt.EventEmitter{constructor(e,t,a){var o;super(),o=this,(0,r.A)(this,"importNotes",(e=>{var t=0;if(e){for(var a=0;a<e.length;a++){var r=e[a],s=Gt(r.name),i=this.importFiles.get(s.name);i.push(r),this.importFiles.set(s.name,i)}var l=0,c=0,u=e=>(n,a)=>{"complete"===n?(l++,t+=a,c===l&&this.emit("status","complete",t),e()):this.emit("status",n,a)};this.importFiles.forEach(function(){var e=(0,Xt.A)((function*(e,t){if(e.length>0)for(var{default:a}=yield(e=>{switch(e){case"simplenote":return n.e(3727).then(n.bind(n,88379));case"evernote":return n.e(5877).then(n.bind(n,59661));case"text-files":return n.e(9754).then(n.bind(n,47616))}throw new Error("Unrecognized importer named ".concat(e))})(t),r=new a(o.addNote,o.options,o.recordEvent),s=function*(t){yield new Promise((n=>{c++;var a=u((()=>{r.off("status",a),n(!0)}));r.on("status",a),r.importNotes([e[t]])}))},i=0;i<e.length;i++)yield*s(i)}));return function(t,n){return e.apply(this,arguments)}}())}else this.emit("status","error","No files to import.")})),this.addNote=e,this.options=t,this.recordEvent=a,this.importFiles=new Map,xt.forEach((e=>{this.importFiles.set(e.name,[])}))}}var en=$t;class tn extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"state",{errorMessage:void 0,finalNoteCount:void 0,importedNoteCount:0,isDone:!1,setMarkdown:!1,shouldShowProgress:!1}),(0,r.A)(this,"initImporter",(()=>{var e=new en(this.props.importNote,{isMarkdown:this.state.setMarkdown},this.props.recordEvent),t=(0,_.throttle)((e=>{this.setState({importedNoteCount:e})}),20);return e.on("status",((e,n)=>{switch(e){case"progress":t(n);break;case"complete":this.setState({finalNoteCount:n,isDone:!0});break;case"error":this.setState({errorMessage:n,shouldShowProgress:!1}),window.setTimeout((()=>{this.setState({isDone:!0})}),200)}})),e})),(0,r.A)(this,"startImport",(()=>{this.setState({shouldShowProgress:!0}),this.props.onStart(),this.initImporter().importNotes(this.props.files)}))}render(){var{endValue:e,locked:t,onClose:n}=this.props,{errorMessage:r,finalNoteCount:o,importedNoteCount:s,isDone:i,setMarkdown:l,shouldShowProgress:c}=this.state;return a.createElement("div",{className:"source-importer-executor"},a.createElement("section",{className:"source-importer-executor__options"},a.createElement(Ut,{headingLevel:3},"Options"),a.createElement("label",null,a.createElement("div",{className:"enable-markdown"},"Enable Markdown on all notes"),a.createElement(Bt,{id:"source-importer-executor__checkbox",className:"source-importer-executor__checkbox",onChange:()=>this.setState({setMarkdown:!l}),checked:l,disabled:t}))),a.createElement(Ft,{shouldMount:Boolean(r)},a.createElement("div",{role:"alert",className:"source-importer-executor__error"},r)),a.createElement(Ft,{shouldMount:c},a.createElement(Zt,{currentValue:i?o:s,endValue:e,isDone:i})),a.createElement("div",{className:"source-importer-executor__button"},i?a.createElement("button",{className:"button button-primary",type:"button",onClick:n},"Close"):a.createElement("button",{className:"button button-primary",disabled:t,type:"button",onClick:this.startImport},"Import")))}}var nn={importNote:g.A.data.importNote,recordEvent:g.A.analytics.recordEvent},an=(0,o.Ng)(null,nn)(tn);class rn extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"state",{acceptedFiles:void 0})}render(){var{buckets:e,onClose:t,onStart:n,locked:r=!1}=this.props,{acceptedTypes:o,instructions:s,title:i}=this.props.source,{acceptedFiles:l}=this.state,c=Boolean(l);return a.createElement("div",{className:"source-importer"},!c&&a.createElement("p",null,i,a.createElement("br",null),s),a.createElement(Vt,{acceptedTypes:o,locked:r,multiple:!0,onAccept:e=>this.setState({acceptedFiles:e}),onReset:()=>this.setState({acceptedFiles:void 0})}),a.createElement("div",{className:"dialog-buttons"},a.createElement("button",{className:"button disabled button-primary",type:"button",disabled:!0},"Import")),a.createElement(Ft,{wrapperClassName:"source-importer__executor-wrapper",shouldMount:c},a.createElement(an,{buckets:e,endValue:c?l.length:void 0,files:l,locked:r,onClose:t,onStart:n})))}}(0,r.A)(rn,"propTypes",{buckets:Y().object,locked:Y().bool,onClose:Y().func.isRequired,onStart:Y().func.isRequired,source:Y().shape({acceptedTypes:Y().string,instructions:Y().string,multiple:Y().bool})});var on=rn;class sn extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"state",{importStarted:!1})}render(){var{closeDialog:e}=this.props,{importStarted:t}=this.state,n={acceptedTypes:Ee.b8?".txt,.md,.json,.enex":".txt,.md,.json",title:"Select the notes you'd like to import.",instructions:Ee.b8?"Accepted file formats: Simplenote (JSON), Text (TXT, MD) and Evernote (ENEX).":"Accepted file formats: Simplenote (JSON) and Text (TXT, MD).",multiple:!0};return a.createElement(ot.A,{className:"import",closeBtnLabel:t?"":"Cancel",onDone:t?void 0:e,title:"Import Notes"},a.createElement("div",{className:"import__inner"},a.createElement(on,{locked:t,onClose:e,onStart:()=>this.setState({importStarted:!0}),source:n})))}}var ln={closeDialog:ee.closeDialog},cn=(0,o.Ng)(null,ln)(sn),un=e=>{var{keys:t,children:n}=e;return a.createElement("div",{className:"keybindings__key-item"},a.createElement("div",{className:"keybindings__key-list"},t.map(((e,t)=>a.createElement(a.Fragment,{key:t},t>0&&" + ","string"==typeof e?a.createElement("kbd",{key:e},e):a.createElement(a.Fragment,null,a.createElement("kbd",null,e[0])," / ",a.createElement("kbd",null,e[1]))))))," - ",a.createElement("div",{className:"keybindings__key-description"},n))};class dn extends a.Component{render(){var{closeDialog:e}=this.props;return a.createElement("div",{className:"keybindings"},a.createElement(ot.A,{onDone:e,title:"Keyboard Shortcuts"},a.createElement("div",{className:"keybindings__sections"},a.createElement("section",null,a.createElement("h1",null,"View"),a.createElement("ul",null,a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"/"]},"Show keyboard shortcuts")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","F"]},"Toggle focus mode")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","S"]},"Focus search field")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"G"]},"Jump to next match in note")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","G"]},"Jump to previous match in note")),Ee.b8&&a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"+"]},"Increase font size")),Ee.b8&&a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"-"]},"Decrease font size")),Ee.b8&&a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"0"]},"Reset font size")))),a.createElement("section",null,a.createElement("h1",null,"Navigation"),a.createElement("ul",null,Ee.b8&&a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,","]},"Open app preferences")),Ee.b8&&a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","E"]},"Export all notes")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","U"]},"Toggle tag list")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","K"]},"Open note above current one")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","J"]},"Open note below current one")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","Y"]},"Toggle editing content/tags")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","L"]},"Toggle note list (on narrow screens)")))),a.createElement("section",null,a.createElement("h1",null,"Note Editing"),a.createElement("ul",null,a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","I"]},"Create new note")),Ee.b8&&a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"P"]},"Print note")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","P"]},"Toggle Markdown preview")),a.createElement("li",null,a.createElement(un,{keys:[Ee.Vh,"Shift","C"]},"Insert checklist item")))))))}}var mn={closeDialog:ee.closeDialog},pn=(0,o.Ng)(null,mn)(dn),gn={reallyLogOut:g.A.ui.reallyLogOut},hn=(0,o.Ng)(null,gn)((e=>{var{reallyLogOut:t}=e;return a.createElement(_t,{description:"Logging out will delete any unsynchronized notes.",unsafeAction:"Log out",safeAction:"Safely log out",action:t})})),En=n(87375);class vn extends a.Component{render(){var{children:e,tabNames:t}=this.props;return a.createElement(En.tU,{selectedTabClassName:"is-active"},a.createElement(En.wb,{className:"tab-panels__tab-list"},t.map(((e,t)=>a.createElement(En.oz,{className:"button button-borderless",key:t},e)))),a.createElement("div",{className:"tab-panels__panel"},a.Children.map(e,((e,t)=>a.createElement(En.Kp,{key:t},a.createElement("div",{className:"tab-panels__column"},e))))))}}(0,r.A)(vn,"propTypes",{children:Y().node.isRequired,className:Y().string,tabNames:Y().arrayOf(Y().string).isRequired});var Nn=vn,fn=()=>null,Tn=e=>{var{title:t,slug:n,activeSlug:r,description:o,onChange:s,learnMoreURL:i,renderer:l,children:c}=e,u=a.createElement("a",{href:i,onClick:e=>{e.preventDefault(),(0,de.i)(i)}},"Learn more"),d=a.Children.toArray(c).filter((e=>e));return a.createElement("div",{className:"settings-group"},a.createElement(Ut,{headingLevel:3},t),a.createElement("div",{className:"settings-items"},d.map((e=>{var{props:{slug:o,title:i}}=e;return a.createElement("label",{className:"settings-item",htmlFor:"settings-field-".concat(n,"-").concat(o),key:o},a.createElement("div",{className:"settings-item-label"},i),a.createElement("div",{className:"settings-item-control"},l({activeSlug:r,groupTitle:t,groupSlug:n,slug:o,title:i,isEnabled:o===r,onChange:s})))}))),o&&a.createElement("p",null,o," ",i&&u))};Tn.propTypes={activeSlug:Y().string,children:Y().node,description:Y().string,learnMoreURL:Y().string,onChange:Y().func,renderer:Y().func,slug:Y().string,title:Y().string};var yn=Tn,On=e=>{var{groupSlug:t,slug:n,isEnabled:r,onChange:o}=e;return a.createElement(Bt,{name:t,value:n,id:"settings-field-".concat(t,"-").concat(n),checked:r,onChange:o})},wn=n(15205),bn={logout:g.A.ui.logout,toggleAnalytics:g.A.data.toggleAnalytics},An=(0,o.Ng)((e=>({accountName:e.settings.accountName,analyticsEnabled:e.data.analyticsAllowed})),bn)((e=>{var{accountName:t,analyticsEnabled:n,logout:r,toggleAnalytics:o}=e;return a.createElement("div",{className:"settings-account"},a.createElement(Ut,{headingLevel:3},"Account"),a.createElement("div",{className:"settings-items"},a.createElement("div",{className:"settings-item"},a.createElement("span",{className:"settings-account-name"},t))),a.createElement("ul",{className:"dialog-actions"},a.createElement("li",null,a.createElement("button",{type:"button",className:"button button-borderless",onClick:()=>{(0,de.i)("https://app.simplenote.com/settings/")}},"Edit Account ",a.createElement(wn.A,null))),a.createElement("li",null,a.createElement(yn,{title:"Privacy",slug:"shareAnalytics",activeSlug:n?"enabled":"",description:"Help us improve Simplenote by sharing usage data with our analytics tool.",onChange:o,learnMoreURL:"https://automattic.com/cookies",renderer:On},a.createElement(fn,{title:"Share analytics",slug:"enabled"}))),a.createElement("li",null,a.createElement("button",{type:"button",className:"button button-primary",onClick:r},"Log Out"))))})),_n=e=>{var{groupSlug:t,slug:n,isEnabled:r,onChange:o}=e;return a.createElement(x,{type:"radio",name:t,value:n,id:"settings-field-".concat(t,"-").concat(n),checked:r,onChange:()=>o(n)})};_n.propTypes={groupSlug:Y().string,slug:Y().string,isEnabled:Y().bool.isRequired,onChange:Y().func.isRequired};var Sn=_n,Cn=[{label:"Name: A-Z",type:"alphabetical",isReversed:!1},{label:"Name: Z-A",type:"alphabetical",isReversed:!0},{label:"Created: Newest",type:"creationDate",isReversed:!1},{label:"Created: Oldest",type:"creationDate",isReversed:!0},{label:"Modified: Newest",type:"modificationDate",isReversed:!1},{label:"Modified: Oldest",type:"modificationDate",isReversed:!0}],Rn={setActiveTheme:g.A.settings.activateTheme,setLineLength:g.A.settings.setLineLength,setNoteDisplay:g.A.settings.setNoteDisplay,setSortType:g.A.settings.setSortType,toggleAutoHideMenuBar:g.A.settings.toggleAutoHideMenuBar,toggleSortTagsAlpha:g.A.settings.toggleSortTagsAlpha},In=(0,o.Ng)((e=>{var{settings:t}=e;return{activeTheme:t.theme,autoHideMenuBar:t.autoHideMenuBar,lineLength:t.lineLength,noteDisplay:t.noteDisplay,sortReversed:t.sortReversed,sortTagsAlpha:t.sortTagsAlpha,sortType:t.sortType}}),Rn)((e=>a.createElement(a.Fragment,null,a.createElement(yn,{title:"Note display",slug:"noteDisplay",activeSlug:e.noteDisplay,onChange:e.setNoteDisplay,renderer:Sn},a.createElement(fn,{title:"Comfy",slug:"comfy"}),a.createElement(fn,{title:"Condensed",slug:"condensed"}),a.createElement(fn,{title:"Expanded",slug:"expanded"})),a.createElement(yn,{title:"Line length",slug:"lineLength",activeSlug:e.lineLength,onChange:e.setLineLength,renderer:Sn},a.createElement(fn,{title:"Narrow",slug:"narrow"}),a.createElement(fn,{title:"Full",slug:"full"})),a.createElement(yn,{title:"Sort by",slug:"sortType",activeSlug:e.sortReversed?e.sortType+"-reversed":e.sortType,onChange:t=>{var n=t.includes("-reversed"),a=t.split("-");e.setSortType(a[0],n)},renderer:Sn},Cn.map((e=>{var t=e.isReversed?e.type+"-reversed":e.type;return a.createElement(fn,{key:t,title:e.label,slug:t})}))),a.createElement(yn,{title:"Tags",slug:"sortTagsAlpha",activeSlug:e.sortTagsAlpha?"alpha":"",onChange:e.toggleSortTagsAlpha,renderer:On},a.createElement(fn,{title:"Sort Alphabetically",slug:"alpha"})),a.createElement(yn,{title:"Theme",slug:"theme",activeSlug:e.activeTheme,onChange:e.setActiveTheme,renderer:Sn},!Ee.j9&&a.createElement(fn,{title:"System",slug:"system"}),a.createElement(fn,{title:"Light",slug:"light"}),a.createElement(fn,{title:"Dark",slug:"dark"})),Ee.b8&&!Ee.cX&&a.createElement(yn,{title:"Menu Bar",slug:"autoHideMenuBar",activeSlug:e.autoHideMenuBar?"autoHide":"",description:"When set to auto-hide, press the Alt key to toggle.",onChange:e.toggleAutoHideMenuBar,renderer:On},a.createElement(fn,{title:"Hide Automatically",slug:"autoHide"})))));function Dn(){return a.createElement("svg",{className:"icon-chevron-right-small",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},a.createElement("rect",{x:"0",fill:"none",width:"16",height:"16"}),a.createElement("path",{d:"M6.87 14.49l-1.49-1.33L9.95 8 5.38 2.84l1.49-1.33L12.62 8 6.87 14.49z"}))}var Ln=e=>{var{items:t,onClickItem:n}=e;return a.createElement("ul",{className:"button-group"},t.map((e=>a.createElement("li",{key:e.slug,className:"button-group__item"},a.createElement("button",{type:"button",onClick:()=>n(e)},e.name,a.createElement(Dn,null))))))};Ln.propTypes={items:Y().array.isRequired,onClickItem:Y().func.isRequired};var kn=Ln,Mn={exportNotes:()=>g.A.data.exportNotes(),requestNotifications:e=>({type:"REQUEST_NOTIFICATIONS",sendNotifications:e}),showImportDialog:()=>(0,ee.showDialog)("IMPORT"),toggleShortcuts:()=>g.A.settings.toggleKeyboardShortcuts()},xn=(0,o.Ng)((e=>{var{settings:{keyboardShortcuts:t,sendNotifications:n}}=e;return{keyboardShortcuts:t,sendNotifications:n}}),Mn)((e=>{var{exportNotes:t,keyboardShortcuts:n,requestNotifications:r,sendNotifications:o,showImportDialog:s,toggleShortcuts:i}=e;return a.createElement(a.Fragment,null,a.createElement("div",{className:"settings-tools"},a.createElement(Ut,{headingLevel:3},"Tools"),a.createElement(kn,{items:[{name:"Import Notes",slug:"import"},{name:"Export Notes",slug:"export"}],onClickItem:e=>{"import"===e.slug?s():"export"===e.slug&&t()}})),a.createElement(yn,{slug:"keyboardShortcuts",activeSlug:n?"keyboardShortcuts":"",onChange:i,renderer:On},a.createElement(fn,{title:"Keyboard Shortcuts",slug:"keyboardShortcuts"})),a.createElement(yn,{slug:"allowNotifications",activeSlug:o?"allowNotifications":"",onChange:()=>r(!o),renderer:On},a.createElement(fn,{title:"Notify on remote changes",slug:"allowNotifications"})))})),Gn=["account","display","tools"],Pn=(0,o.Ng)(null,{closeDialog:ee.closeDialog})((e=>{var{closeDialog:t}=e;return a.createElement(ot.A,{className:"settings",title:"Settings",onDone:t},a.createElement(Nn,{tabNames:Gn},a.createElement(An,null),a.createElement(In,null),a.createElement(xn,null)))})),Hn=n(2848),Vn=n.n(Hn);class Fn extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"onAddCollaborator",(e=>{var{noteId:t}=this.props,n=this.collaboratorElement.value.trim();e.preventDefault(),this.collaboratorElement.value="";var a=this.props.settings.accountName===n;""===n||a||this.props.addCollaborator(t,n)})),(0,r.A)(this,"onRemoveCollaborator",(e=>{var{noteId:t}=this.props;this.props.removeCollaborator(t,e)})),(0,r.A)(this,"collaborators",(()=>{var{note:e}=this.props,t=((null==e?void 0:e.tags)||[]).filter(z.A);return t.reverse(),t})),(0,r.A)(this,"gravatarURL",(e=>{var t=(new(Vn())).update(e.trim().toLowerCase()).digest("hex").toLowerCase();return"https://secure.gravatar.com/avatar/".concat(t,".jpg?s=68")}))}render(){var{closeDialog:e}=this.props;return a.createElement(ot.A,{className:"settings",title:"Collaborate",onDone:e},a.createElement("div",{className:"tab-panels__panel"},a.createElement("div",{className:"tab-panels__column"},a.createElement("div",{className:"settings-group"},a.createElement("p",null,"Add an email address of another Simplenote user to share a note. You'll both be able to edit and view the note."),a.createElement("div",{className:"settings-items"},a.createElement("form",{className:"settings-item",onSubmit:this.onAddCollaborator},a.createElement("input",{className:"settings-item-text-input transparent-input",pattern:"^[^@]+@.+",placeholder:"email@example.com",ref:e=>this.collaboratorElement=e,spellCheck:!1,title:"Please enter a valid email"}),a.createElement("div",{className:"settings-item-control"},a.createElement("button",{type:"submit",className:"button button-borderless"},"Add Email"))))),a.createElement("div",{className:"settings-group"},a.createElement("div",{className:"share-collaborators-heading"},a.createElement(Ut,{headingLevel:3},"Collaborators")),a.createElement("ul",{className:"share-collaborators"},this.collaborators().map((e=>a.createElement("li",{key:e,className:"share-collaborator"},a.createElement("span",{className:"share-collaborator-photo"},a.createElement("img",{src:this.gravatarURL(e),width:"34",height:"34"})),a.createElement("span",{className:"share-collaborator-name"},e),a.createElement("button",{className:"share-collaborator-remove button button-borderless button-danger",onClick:this.onRemoveCollaborator.bind(this,e)},"Remove")))))))))}}var Un={addCollaborator:g.A.data.addCollaborator,closeDialog:g.A.ui.closeDialog,editNote:g.A.data.editNote,publishNote:g.A.data.publishNote,removeCollaborator:g.A.data.removeCollaborator},jn=(0,o.Ng)((e=>{var{data:t,settings:n,ui:{openedNote:a}}=e;return{settings:n,noteId:a,note:t.notes.get(a)}}),Un)(Fn),Bn={trashTag:e=>({type:"TRASH_TAG",tagName:e}),closeDialog:g.A.ui.closeDialog},zn=(0,o.Ng)(null,Bn)((e=>{var{closeDialog:t,tagName:n,trashTag:r}=e;return a.createElement(ot.A,{className:"trash-tag-confirmation",onDone:t,title:"Delete Tag"},a.createElement("div",{className:"dialog-inner-content"},'Are you sure you want to delete "',a.createElement("span",{className:"tag-name"},n),'"?'),a.createElement("div",{className:"dialog-buttons"},a.createElement("button",{autoFocus:!0,className:"button-primary delete-tag",onClick:()=>r(n)},"Delete Tag")))}));class Wn extends a.Component{render(){var{theme:e,closeDialog:t,dialogs:n}=this.props;return a.createElement(a.Fragment,null,n.map((e=>a.createElement(i(),{key:e.type,className:"dialog-renderer__content",contentLabel:e.type,isOpen:!0,onRequestClose:t,overlayClassName:"dialog-renderer__overlay",portalClassName:"dialog-renderer__portal",shouldCloseOnOverlayClick:!1},"ABOUT"===e.type?a.createElement(nt.A,{key:"about",closeDialog:t}):"BETA-WARNING"===e.type?a.createElement(lt,{key:"beta-warning"}):"CLOSE-WINDOW-CONFIRMATION"===e.type?a.createElement(Ct,{key:"close-window-confirmation"}):"IMPORT"===e.type?a.createElement(cn,{key:"import"}):"KEYBINDINGS"===e.type?a.createElement(pn,{key:"keybindings"}):"LOGOUT-CONFIRMATION"===e.type?a.createElement(hn,{key:"logout-confirmation"}):"SETTINGS"===e.type?a.createElement(Pn,{key:"settings"}):"SHARE"===e.type?a.createElement(jn,{key:"share"}):"TRASH-TAG-CONFIRMATION"===e.type?a.createElement(zn,{key:"trash-tag-confirmation",tagName:e.tagName}):null))))}}(0,r.A)(Wn,"displayName","DialogRenderer");var Yn={closeDialog:ee.closeDialog},Kn=(0,o.Ng)((e=>({dialogs:e.ui.dialogs,theme:(0,v.O4)(e)})),Yn)(Wn),qn=n(57944),Qn=n(98325),Zn={dismiss:()=>g.A.ui.dismissEmailVerifyDialog()},Xn=(0,o.Ng)((e=>({accountVerification:e.data.accountVerification,email:e.settings.accountName,theme:v.O4(e)})),Zn)((e=>{var{accountVerification:t,dismiss:n,email:r,theme:o}=e,s=btoa(r||""),l="https://app.simplenote.com/account/verify-email/".concat(s);"pending"===t?(0,Qn.yM)("verification_verify_screen_viewed"):(0,Qn.yM)("verification_review_screen_viewed");var c=a.createElement("div",{className:"email-verification__dismiss"},a.createElement("button",{className:"icon-button","aria-label":"Close dialog",onClick:n},a.createElement(rt.A,null))),u=a.createElement(a.Fragment,null,c,a.createElement("span",null,a.createElement(Pt.A,null)),a.createElement("h2",null,"Review Your Account"),a.createElement("p",null,"You are registered with Simplenote using the email:"),a.createElement("p",{className:"email-verification__email"},a.createElement("strong",null,r)),a.createElement("p",null,"Improvements to account security may result in account loss if you no longer have access to this email address."),a.createElement("div",{className:"email-verification__button-row button-borderless"},a.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://app.simplenote.com/settings",onClick:()=>(0,Qn.yM)("verification_change_email_button_tapped")},a.createElement("button",{className:"button button-borderless"},"Change Email")),a.createElement("a",{target:"_blank",rel:"noreferrer",href:l,onClick:()=>(0,Qn.yM)("verification_confirm_button_tapped")},a.createElement("button",{className:"button button-primary"},"Confirm")))),d=a.createElement(a.Fragment,null,c,a.createElement("span",null,a.createElement(qn.A,null)),a.createElement("h2",null,"Verify Your Email"),a.createElement("p",null,"We’ve sent a verification email to ",a.createElement("strong",null,r),"."),a.createElement("p",null,"Please check your inbox and follow the instructions."),a.createElement("div",{className:"email-verification__button-row"},a.createElement("a",{target:"_blank",rel:"noreferrer",href:l,onClick:()=>(0,Qn.yM)("verification_resend_email_button_tapped")},a.createElement("button",{className:"button button-borderless"},"Resend Email"))));return a.createElement(i(),{key:"email-verification",className:"email-verification__modal",isOpen:!0,onRequestClose:n,contentLabel:"Confirm your email",overlayClassName:"email-verification__overlay",portalClassName:w()("email-verification__portal")},"pending"===t?d:u)})),Jn={dismiss:()=>g.A.ui.showAlternateLoginPrompt(!1),logout:g.A.ui.logout},$n=(0,o.Ng)((e=>({alternateLoginEmail:e.ui.alternateLoginEmail,email:e.settings.accountName,theme:v.O4(e)})),Jn)((e=>{var{alternateLoginEmail:t,dismiss:n,email:r,logout:o,theme:s}=e,l=a.createElement("div",{className:"alternate-login__dismiss"},a.createElement("button",{className:"icon-button","aria-label":"Close dialog",onClick:n},a.createElement(rt.A,null))),c=a.createElement(a.Fragment,null,l,a.createElement("span",null,a.createElement(Pt.A,null)),a.createElement("h2",null,"Logout?"),a.createElement("p",null,"You are already logged in as:"),a.createElement("p",{className:"alternate-login__email"},a.createElement("strong",null,r)),a.createElement("p",null,"You tried logging in with:"),a.createElement("p",{className:"alternate-login__email"},a.createElement("strong",null,t)),a.createElement("p",null,"Would you like to log out?"),a.createElement("div",{className:"alternate-login__button-row button-borderless"},a.createElement("a",{target:"_blank",rel:"noreferrer",onClick:n},a.createElement("button",{className:"button button-borderless"},"Cancel")),a.createElement("a",{target:"_blank",rel:"noreferrer",onClick:o},a.createElement("button",{className:"button button-primary"},"Logout"))));return a.createElement(i(),{key:"alternate-login",className:"alternate-login__modal",isOpen:!0,onRequestClose:n,contentLabel:"Log out?",overlayClassName:"alternate-login__overlay",portalClassName:w()("alternate-login__portal")},c)})),ea=n(69343);class ta extends a.Component{constructor(){super(...arguments),(0,r.A)(this,"handleShortcut",(e=>{var{hotkeysEnabled:t}=this.props,n=!window.electron;if(n&&this.handleBrowserSearchShortcut(e),t){var{ctrlKey:a,metaKey:r,shiftKey:o}=e,s=e.key.toLowerCase();return(a||r)&&a!==r&&o&&"u"===s?(this.props.toggleTagList(),e.stopPropagation(),e.preventDefault(),!1):("Escape"!==s&&"Esc"!==s||!this.props.isSearchActive||this.props.clearSearch(),n&&this.handleBrowserShortcut(e),!0)}})),(0,r.A)(this,"handleBrowserShortcut",(e=>{var{ctrlKey:t,metaKey:n,shiftKey:a}=e,r=e.key.toLowerCase(),o=(t||n)&&t!==n;return o&&a&&"i"===r?(this.props.createNote(),e.stopPropagation(),e.preventDefault(),!1):o&&a&&"f"===r?(this.props.toggleFocusMode(),e.stopPropagation(),e.preventDefault(),!1):void 0})),(0,r.A)(this,"handleBrowserSearchShortcut",(e=>{var{ctrlKey:t,metaKey:n,shiftKey:a}=e,r=e.key.toLowerCase(),o=(t||n)&&t!==n;if(o&&a&&"s"===r||o&&!a&&"f"===r)return this.props.focusSearchField(),e.stopPropagation(),e.preventDefault(),!1;!o||"g"!==r&&"f"!==r||(e.stopPropagation(),e.preventDefault())})),(0,r.A)(this,"toggleShortcuts",(e=>{e?window.addEventListener("keydown",this.handleShortcut,!0):window.removeEventListener("keydown",this.handleShortcut,!0)}))}componentDidMount(){var e;null===(e=window.electron)||void 0===e||e.send("setAutoHideMenuBar",this.props.autoHideMenuBar),document.body.dataset.theme=this.props.theme,this.toggleShortcuts(!0),(0,Qn.yM)("application_opened")}componentDidUpdate(){document.body.dataset.theme=this.props.theme}componentWillUnmount(){this.toggleShortcuts(!1),delete document.body.dataset.theme}render(){var{isDevConfig:e,lineLength:t,showAlternateLoginPrompt:n,showEmailVerification:r,showNavigation:o,showNoteActions:s,showNoteInfo:i,showRevisions:l,theme:c}=this.props,u=w()("app",{"is-line-length-full":"full"===t,"touch-enabled":"ontouchstart"in document.body}),d=w()("simplenote-app",{"navigation-open":o,"is-electron":Ee.b8});return a.createElement("div",{className:u},r&&a.createElement(Xn,null),n&&a.createElement($n,null),e&&a.createElement(tt,{"aria-hidden":!(!o&&!l)||void 0}),a.createElement("div",{className:d},o&&a.createElement(ge,null),a.createElement(et,null),i&&a.createElement(y,null),s&&a.createElement(V,null)),a.createElement(Kn,{appProps:this.props}))}}(0,r.A)(ta,"displayName","App");var na=(0,o.Ng)((e=>({autoHideMenuBar:e.settings.autoHideMenuBar,hotkeysEnabled:e.settings.keyboardShortcuts,isSearchActive:!!e.ui.searchQuery.length,isSmallScreen:v.Qv(e),lineLength:e.settings.lineLength,showAlternateLoginPrompt:e.ui.showAlternateLoginPrompt,showEmailVerification:v.AK(e),showNavigation:e.ui.showNavigation,showNoteActions:e.ui.showNoteActions,showNoteInfo:e.ui.showNoteInfo,showRevisions:e.ui.showRevisions,theme:v.O4(e)})),(e=>({activateTheme:t=>e(ea.activateTheme(t)),clearSearch:()=>e((0,ee.search)("")),closeNote:()=>e((0,ee.closeNote)()),createNote:()=>e((0,ee.createNote)()),focusSearchField:()=>e(g.A.ui.focusSearchField()),setLineLength:t=>e(ea.setLineLength(t)),setNoteDisplay:t=>e(ea.setNoteDisplay(t)),setSortType:t=>e(ea.setSortType(t)),toggleAutoHideMenuBar:()=>e(ea.toggleAutoHideMenuBar()),toggleFocusMode:()=>e(ea.toggleFocusMode()),toggleSortOrder:()=>e(ea.toggleSortOrder()),toggleSortTagsAlpha:()=>e(ea.toggleSortTagsAlpha()),toggleSpellCheck:()=>e(ea.toggleSpellCheck()),toggleTagList:()=>e((0,ee.toggleNavigation)())})))(ta),aa=n(6372),ra=n(37289),oa=n.n(ra),sa=n(32446),ia=n(7255),la=n.n(ia);function ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var da=!0,ma=()=>{da=!1},pa=()=>new Promise(((e,t)=>{var n=indexedDB.open("simplenote_v2",2020065);n.onsuccess=()=>e(n.result),n.onerror=()=>t(),n.onupgradeneeded=()=>{var e=n.result;e.objectStoreNames.contains("state")||e.createObjectStore("state"),e.objectStoreNames.contains("revisions")||e.createObjectStore("revisions")},n.onblocked=()=>t()})),ga=function(){var e=(0,Xt.A)((function*(e,t){var n=(yield pa()).transaction("revisions","readwrite"),a=n.objectStore("revisions").get(e);a.onsuccess=()=>{var r,o=a.result,s=null!==(r=null==o?void 0:o.slice())&&void 0!==r?r:[],i=new Set(s.map((e=>{var[t]=e;return t})));t.forEach((e=>{var[t,n]=e;i.has(t)||(s.push([t,n]),i.add(t))})),s.sort(((e,t)=>e[0]-t[0])),n.objectStore("revisions").put(s,e)},a.onerror=()=>{n.objectStore("revisions").put(t,e)}}));return function(t,n){return e.apply(this,arguments)}}(),ha=e=>{var{dispatch:t,getState:n}=e;return e=>{var t=null;return a=>{var r=e(a);return t&&clearTimeout(t),da&&(t=setTimeout((()=>da&&(e=>{var t=Array.from(e.data.notes),n=Array.from(e.data.noteTags).map((e=>{var[t,n]=e;return[t,Array.from(n)]})),a=Array.from(e.data.preferences),r=Array.from(e.data.tags),o=Array.from(e.simperium.ghosts[0]),s=Array.from(e.simperium.ghosts[1]),i=Array.from(e.simperium.lastRemoteUpdate),l=Array.from(e.simperium.lastSync),c={accountName:e.settings.accountName,allowAnalytics:e.data.analyticsAllowed,notes:t,noteTags:n,preferences:a,tags:r,cvs:o,ghosts:s,lastRemoteUpdate:i,lastSync:l};return pa().then((e=>{e.transaction("state","readwrite").objectStore("state").put(c,"state")}))})(n())),1e3)),"LOAD_REVISIONS"===a.type&&a.revisions.length>0&&ga(a.noteId,a.revisions),r}}},Ea=n(95391);function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fa=e=>t=>n=>{var a=e.getState();switch(n.type){case"CREATE_NOTE":var r,o,s,i,l,c,u=(0,Ea.A)(),d=a.ui.filteredNotes[0],m=d&&a.data.notes.get(d),p=null==m?void 0:m.systemTags.includes("markdown"),g=null!==(r=null===(o=n.note)||void 0===o||null===(o=o.systemTags)||void 0===o?void 0:o.indexOf("markdown"))&&void 0!==r?r:-1,h=null!==(s=null===(i=n.note)||void 0===i||null===(i=i.systemTags)||void 0===i?void 0:i.slice())&&void 0!==s?s:[];p&&-1===g?h.push("markdown"):!p&&g>=0&&h.splice(g,1);var E=(0,v.Q5)(a),N=null!==(l=null===(c=n.note)||void 0===c?void 0:c.tags)&&void 0!==l?l:[],f=E?(0,te.Rd)(N,E):N;return t({type:"CREATE_NOTE_WITH_ID",noteId:u,note:Na(Na({},n.note),{},{systemTags:h,tags:f}),meta:{nextNoteToOpen:u}});case"DELETE_OPEN_NOTE_FOREVER":if(!a.ui.openedNote)return;return t({type:"DELETE_NOTE_FOREVER",noteId:a.ui.openedNote});case"EMPTY_TRASH":var T=t(n);return a.data.notes.forEach(((t,n)=>{t.deleted&&e.dispatch({type:"DELETE_NOTE_FOREVER",noteId:n})})),T;case"EXPORT_NOTES":return wt(a.data.notes),t(n);case"IMPORT_NOTE":return t({type:"IMPORT_NOTE_WITH_ID",noteId:(0,Ea.A)(),note:n.note});case"RESTORE_OPEN_NOTE":if(!a.ui.openedNote)return;return t({type:"RESTORE_NOTE",noteId:a.ui.openedNote});case"TOGGLE_ANALYTICS":return t({type:"SET_ANALYTICS",allowAnalytics:!a.data.analyticsAllowed});case"TRASH_OPEN_NOTE":if(!a.ui.openedNote)return;return t({type:"TRASH_NOTE",noteId:a.ui.openedNote});case"TRASH_TAG":return a.data.tags.has((0,te.YG)(n.tagName))?t(Na(Na({},n),{},{remainingTags:(0,v.nn)(a)-1})):null;default:return t(n)}},Ta=n(87989),ya=n.n(Ta),Oa=ya()("electron-middleware"),wa=e=>{var{dispatch:t,getState:n}=e;return window.electron.receive("tokenLogin",(e=>{var{searchParams:a}=new URL(e),r=a.get("email");r!==n().settings.accountName&&t(g.A.ui.showAlternateLoginPrompt(r))})),window.electron.receive("appCommand",(e=>{switch(e.action){case"closeWindow":return void t(g.A.ui.closeWindow());case"emptyTrash":return void t(g.A.ui.emptyTrash());case"exportNotes":return void t(g.A.data.exportNotes());case"logout":return void t({type:"LOGOUT"});case"printNote":return void window.print();case"activateTheme":return void t(g.A.settings.activateTheme(e.theme));case"focusSearchField":return void t(g.A.ui.focusSearchField());case"showDialog":return void t(g.A.ui.showDialog(e.dialog));case"trashNote":return void t(g.A.ui.trashOpenNote());case"newNote":return void t(g.A.ui.createNote());case"setLineLength":return void t(g.A.settings.setLineLength(e.lineLength));case"setNoteDisplay":return void t(g.A.settings.setNoteDisplay(e.noteDisplay));case"setSortType":return void t(g.A.settings.setSortType(e.sortType));case"toggleFocusMode":return void t(g.A.settings.toggleFocusMode());case"toggleSortOrder":return void t(g.A.settings.toggleSortOrder());case"toggleSortTagsAlpha":return void t(g.A.settings.toggleSortTagsAlpha());case"toggleSpellCheck":return void t(g.A.settings.toggleSpellCheck());default:Oa("unknown AppCommand: ".concat(e))}})),window.electron.send("appStateUpdate",{settings:n().settings,editMode:n().ui.editMode}),e=>t=>{var a=n(),r=e(t),o=n();return"REALLY_CLOSE_WINDOW"===t.type?(window.electron.send("reallyCloseWindow"),r):(a.settings===o.settings&&a.ui.editMode===o.ui.editMode||window.electron.send("appStateUpdate",{settings:o.settings,editMode:o.ui.editMode}),r)}},ba=n(71559);function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sa=e=>t=>n=>{var a,r,o;switch(n.type){case"SELECT_NOTE_ABOVE":var{ui:{filteredNotes:s,openedNote:i}}=e.getState();if(0===s.length)return;if(!i)return t({type:"SELECT_NOTE",noteId:s[0]});var l=s.findIndex((e=>e===i));if(0===l)return;return t({type:"SELECT_NOTE",noteId:-1===l?s[0]:s[l-1]});case"SELECT_NOTE_BELOW":var{ui:{filteredNotes:c,openedNote:u}}=e.getState();if(0===c.length)return;if(!u)return t({type:"SELECT_NOTE",noteId:c[0]});var d=c.findIndex((e=>e===u));if(d===c.length-1)return;return t({type:"SELECT_NOTE",noteId:-1===d?c[0]:c[d+1]});case"SHOW_ALL_NOTES":case"SHOW_UNTAGGED_NOTES":case"SELECT_TRASH":return t(_a(_a({},n),{},{meta:_a(_a({},n.meta),{},{nextNoteToOpen:null!==(a=null===(r=n.meta)||void 0===r||null===(r=r.searchResults)||void 0===r?void 0:r.noteIds[0])&&void 0!==a?a:null})}));case"REQUEST_NOTIFICATIONS":if(n.sendNotifications&&"default"===(null===(o=window.Notification)||void 0===o?void 0:o.permission)){var m,p=()=>e.dispatch({type:"REQUEST_NOTIFICATIONS",sendNotifications:!0}),g=null===(m=window.Notification)||void 0===m?void 0:m.requestPermission(p);"function"==typeof g.then&&g.then(p)}return t(n);default:return t(n)}},Ca=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",Ra=()=>window.innerWidth,Ia=(0,sa.HY)({windowWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra(),t=arguments.length>1?arguments[1]:void 0;return"WINDOW_RESIZE"===t.type?t.innerWidth:e},systemTheme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ca(),t=arguments.length>1?arguments[1]:void 0;return"SYSTEM_THEME_UPDATE"===t.type?t.prefers:e}}),Da=e=>{var{dispatch:t}=e;return window.addEventListener("resize",(()=>t({type:"WINDOW_RESIZE",innerWidth:Ra()}))),window.matchMedia("(prefers-color-scheme: dark)").addListener((()=>t({type:"SYSTEM_THEME_UPDATE",prefers:Ca()}))),e=>e};function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ma=e=>ka(ka({},e),{},{modificationDate:Date.now()/1e3}),xa=(0,sa.HY)({accountVerification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1?arguments[1]:void 0;return"UPDATE_ACCOUNT_VERIFICATION"===t.type&&"dismissed"!==e?t.state:e},analyticsAllowed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_ANALYTICS_UPDATE":case"SET_ANALYTICS":return t.allowAnalytics;default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var n=e.get(t.noteId);if(!n)return e;var a="ADD_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName,r=(0,te.Rd)(n.tags,a);return r!==n.tags?new Map(e).set(t.noteId,Ma(ka(ka({},n),{},{tags:r}))):e;case"CREATE_NOTE_WITH_ID":return new Map(e).set(t.noteId,ka({content:"",creationDate:Date.now()/1e3,modificationDate:Date.now()/1e3,deleted:!1,publishURL:"",shareURL:"",systemTags:[],tags:[]},t.note));case"DELETE_NOTE_FOREVER":case"NOTE_BUCKET_REMOVE":case"REMOTE_NOTE_DELETE_FOREVER":if(!e.has(t.noteId))return e;var o=new Map(e);return o.delete(t.noteId),o;case"EDIT_NOTE":var s,i=null!==(s=e.get(t.noteId))&&void 0!==s?s:{content:"",creationDate:Date.now()/1e3,modificationDate:Date.now()/1e3,deleted:!1,publishURL:"",shareURL:"",systemTags:[],tags:[]};return new Map(e).set(t.noteId,Ma(ka(ka({},i),t.changes)));case"NOTE_BUCKET_UPDATE":case"REMOTE_NOTE_UPDATE":case"RESTORE_NOTE_REVISION":case"IMPORT_NOTE_WITH_ID":return new Map(e).set(t.noteId,t.note);case"MARKDOWN_NOTE":if(!e.has(t.noteId))return e;var l=e.get(t.noteId);if(l.systemTags.includes("markdown")===t.shouldEnableMarkdown)return e;var c=t.shouldEnableMarkdown?[...l.systemTags,"markdown"]:l.systemTags.filter((e=>"markdown"!==e));return new Map(e).set(t.noteId,Ma(ka(ka({},l),{},{systemTags:c})));case"PIN_NOTE":if(!e.has(t.noteId))return e;var u=e.get(t.noteId);if(u.systemTags.includes("pinned")===t.shouldPin)return e;var d=t.shouldPin?[...u.systemTags,"pinned"]:u.systemTags.filter((e=>"pinned"!==e));return new Map(e).set(t.noteId,Ma(ka(ka({},u),{},{systemTags:d})));case"PUBLISH_NOTE":if(!e.has(t.noteId))return e;var m=e.get(t.noteId);if(m.systemTags.includes("published")===t.shouldPublish)return e;var p=t.shouldPublish?[...m.systemTags,"published"]:m.systemTags.filter((e=>"published"!==e));return new Map(e).set(t.noteId,Ma(ka(ka({},m),{},{systemTags:p})));case"REMOVE_COLLABORATOR":case"REMOVE_NOTE_TAG":var g=e.get(t.noteId);if(!g)return e;var h="REMOVE_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName,E=(0,te.nb)(g.tags,h);return E!==g.tags?new Map(e).set(t.noteId,Ma(ka(ka({},g),{},{tags:E}))):e;case"RENAME_TAG":var v=(0,te.YG)(t.oldTagName),N=(0,te.YG)(t.newTagName),f=new Map(e);return v===N||f.forEach(((e,n)=>{var a=[],r=new Set,o=!1;e.tags.forEach((e=>{var n=(0,te.YG)(e);o=o||n===v||n===N,r.has(n)||(v!==n&&(r.add(n),a.push(e)),r.has(N)||(r.add(N),a.push(t.newTagName)))})),o&&f.set(n,Ma(ka(ka({},e),{},{tags:a})))})),f;case"RESTORE_NOTE":return e.has(t.noteId)?new Map(e).set(t.noteId,Ma(ka(ka({},e.get(t.noteId)),{},{deleted:!1}))):e;case"TRASH_NOTE":return e.has(t.noteId)?new Map(e).set(t.noteId,Ma(ka(ka({},e.get(t.noteId)),{},{deleted:!0}))):e;case"TRASH_TAG":var T=new Map(e),y=!1;return T.forEach(((e,n)=>{var a=(0,te.nb)(e.tags,t.tagName);a!==e.tags&&(y=!0,T.set(n,Ma(ka(ka({},e),{},{tags:a}))))})),y?T:e;default:return e}},noteRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;if("LOAD_REVISIONS"===t.type){var n,a=null!==(n=e.get(t.noteId))&&void 0!==n?n:new Map,r=new Map(a);return t.revisions.forEach((e=>{var[t,n]=e;return r.set(t,n)})),new Map(e).set(t.noteId,r)}return e},noteTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var n,a=(0,te.YG)("ADD_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName);return new Map(e).set(a,(null!==(n=e.get(a))&&void 0!==n?n:new Set).add(t.noteId));case"EDIT_NOTE":case"IMPORT_NOTE_WITH_ID":var r="EDIT_NOTE"===t.type?t.changes.tags:t.note.tags;if(null==r||!r.length)return e;var{noteId:o}=t,s=new Set(r.map(te.YG)),i=new Map(e);return i.forEach(((e,t)=>{if(e.has(o)&&!s.has(t)){var n=new Set(e);return n.delete(o),void i.set(t,n)}!e.has(o)&&s.has(t)&&i.set(t,new Set(e).add(o))})),i;case"TAG_REFRESH":return t.noteTags;case"REMOTE_TAG_DELETE":case"TAG_BUCKET_REMOVE":var l=new Map(e);return l.delete(t.tagHash)?l:e;case"REMOVE_COLLABORATOR":case"REMOVE_NOTE_TAG":var c=(0,te.YG)("REMOVE_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName),u=e.get(c);if(!u)return e;var d=new Set(u);return d.delete(t.noteId)?new Map(e).set(c,d):e;case"TRASH_TAG":var m=new Map(e);return m.delete((0,te.YG)(t.tagName))?m:e;default:return e}},preferences:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_ANALYTICS":return new Map(t).set("preferences-key",ka(ka({},null!==(e=t.get("preferences-key"))&&void 0!==e?e:{}),{},{analytics_enabled:n.allowAnalytics}));case"PREFERENCES_BUCKET_REMOVE":var a=new Map(t);return a.delete(n.id)?a:t;case"PREFERENCES_BUCKET_UPDATE":return new Map(t).set(n.id,n.data);default:return t}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var n="ADD_COLLABORATOR"===t.type?t.collaboratorAccount:t.tagName;return e.has((0,te.YG)(n))?e:new Map(e).set((0,te.YG)(n),{name:n});case"EDIT_NOTE":case"IMPORT_NOTE_WITH_ID":var a="EDIT_NOTE"===t.type?t.changes.tags:t.note.tags;if(null==a||!a.length)return e;var r=new Map(e),o=!1;return a.forEach((t=>{var n=(0,te.YG)(t);e.has(n)||(r.set(n,{name:t}),o=!0)})),o?r:e;case"REMOTE_TAG_DELETE":case"TAG_BUCKET_REMOVE":var s=new Map(e);return s.delete(t.tagHash)?s:e;case"REMOTE_TAG_UPDATE":case"TAG_BUCKET_UPDATE":return new Map(e).set(t.tagHash,t.tag);case"RENAME_TAG":var i,l=(0,te.YG)(t.oldTagName),c=(0,te.YG)(t.newTagName),u=new Map(e),d=null!==(i=e.get(l))&&void 0!==i?i:{};return u.set(c,ka(ka({},d),{},{name:t.newTagName})),l!==c&&u.delete(l),u;case"REORDER_TAG":var m=(0,te.YG)(t.tagName),p=e.get(m);if(!p)return e;var g=new Map(e);return g.delete(m),[...g.entries()].sort(((e,t)=>void 0!==e[1].index&&void 0!==t[1].index?e[1].index-t[1].index:void 0===e[1].index?1:-1)).forEach(((e,n)=>{var[a,r]=e;g.set(a,ka(ka({},r),{},{index:n<t.newIndex?n:n+1}))})),g.set(m,ka(ka({},p),{},{index:t.newIndex})),g;case"TAG_REFRESH":var h=new Map(e);return t.noteTags.forEach(((e,t)=>{h.has(t)||h.set(t,{name:(0,te.Fk)(t)})})),h;case"RESTORE_NOTE_REVISION":var E=new Map(e);return t.note.tags.forEach((e=>{var t=(0,te.YG)(e);E.has(t)||E.set(t,{name:e})})),E;case"TRASH_TAG":var v=new Map(e);return v.delete((0,te.YG)(t.tagName))?v:e;default:return e}}}),Ga=(0,sa.HY)({accountName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"setAccountName"===t.type?t.accountName:e},autoHideMenuBar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setAutoHideMenuBar":return t.autoHideMenuBar;case"TOGGLE_AUTO_HIDE_MENU_BAR":return!e;default:return e}},focusModeEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setFocusMode":return t.focusModeEnabled;case"TOGGLE_FOCUS_MODE":return!e;default:return e}},keyboardShortcuts:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return"KEYBOARD_SHORTCUTS_TOGGLE"===(arguments.length>1?arguments[1]:void 0).type?!e:e},lineLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"narrow",t=arguments.length>1?arguments[1]:void 0;return"setLineLength"===t.type?t.lineLength:e},markdownEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_SYSTEM_TAG"===t.type&&"markdown"===t.tagName?t.shouldHaveTag:e},noteDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"comfy",t=arguments.length>1?arguments[1]:void 0;return"setNoteDisplay"===t.type?t.noteDisplay:e},sendNotifications:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"granted"===(null===(e=window.Notification)||void 0===e?void 0:e.permission),r=arguments.length>1?arguments[1]:void 0;return"REQUEST_NOTIFICATIONS"===r.type?!!r.sendNotifications&&"granted"===(null===(t=window.Notification)||void 0===t?void 0:t.permission):a&&"granted"===(null===(n=window.Notification)||void 0===n?void 0:n.permission)},sortReversed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortReversed":return t.sortReversed;case"setSortType":return void 0!==t.sortReversed?t.sortReversed:e;case"TOGGLE_SORT_ORDER":return!e;default:return e}},sortTagsAlpha:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortTagsAlpha":return t.sortTagsAlpha;case"TOGGLE_SORT_TAGS_ALPHA":return!e;default:return e}},sortType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"modificationDate",t=arguments.length>1?arguments[1]:void 0;return"setSortType"===t.type?t.sortType:e},spellCheckEnabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSpellCheck":return t.spellCheckEnabled;case"TOGGLE_SPELLCHECK":return!e;default:return e}},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system",t=arguments.length>1?arguments[1]:void 0;return"setTheme"===t.type?t.theme:e}}),Pa=new Map,Ha=(0,sa.HY)({connectionStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.onLine?"red":"offline",t=arguments.length>1?arguments[1]:void 0;return"CHANGE_CONNECTION_STATUS"===t.type?t.status:e},ghosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Map,new Map],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GHOST_REMOVE_ENTITY":var n,[a,r]=e,o=null!==(n=r.get(t.bucketName))&&void 0!==n?n:new Map,s=new Map(o);return s.delete(t.entityId),[a,new Map(r).set(t.bucketName,s)];case"GHOST_SET_CHANGE_VERSION":var[i,l]=e;return[new Map(i).set(t.bucketName,t.version),l];case"GHOST_SET_ENTITY":var c,[u,d]=e,m=null!==(c=d.get(t.bucketName))&&void 0!==c?c:new Map,p=new Map(m).set(t.entityId,t.ghost);return[u,new Map(d).set(t.bucketName,p)];default:return e}},lastSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACKNOWLEDGE_PENDING_CHANGE":return new Map(e).set(t.entityId,Date.now());case"REMOTE_NOTE_UPDATE":return new Map(e).set(t.noteId,Date.now());default:return e}},lastRemoteUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa,t=arguments.length>1?arguments[1]:void 0;return"REMOTE_NOTE_UPDATE"===t.type&&t.remoteInfo?new Map(e).set(t.noteId,Date.now()):e}}),Va=n(51938),Fa=["type","name"];function Ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ua(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ba=[],za=(0,sa.HY)({collection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"all"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NOTE_WITH_ID":return"trash"===e.type?{type:"all"}:"tag"===e.type?{type:"tag",tagName:e.tagName}:e;case"OPEN_TAG":return{type:"tag",tagName:t.tagName};case"RENAME_TAG":return"tag"===e.type&&e.tagName===t.oldTagName?{type:"tag",tagName:t.newTagName}:e;case"SELECT_TRASH":return{type:"trash"};case"SHOW_ALL_NOTES":return{type:"all"};case"SHOW_UNTAGGED_NOTES":return{type:"untagged"};case"TRASH_TAG":var n="tag"===e.type&&(0,te.YG)(e.tagName)===(0,te.YG)(t.tagName),a="untagged"===e.type&&0===(null==t?void 0:t.remainingTags);return n||a?{type:"all"}:e;default:return e}},alternateLoginEmail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ALTERNATE_LOGIN_PROMPT":return t.email?atob(t.email):null;case"HIDE_ALTERNATE_LOGIN_PROMPT":return null;default:return e}},dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_DIALOG":return e.slice(0,-1);case"TRASH_TAG":return e.filter((e=>"TRASH-TAG-CONFIRMATION"!==e.type));case"REMOTE_TAG_DELETE":return e.filter((e=>!("TRASH-TAG-CONFIRMATION"===e.type&&(0,te.YG)(e.tagName)===t.tagHash)));case"SHOW_DIALOG":var{type:n,name:a}=t,r=(0,D.A)(t,Fa);return e.find((e=>e.type===a))?e:[...e,ja({type:a},r)];default:return e}},editMode:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_EDIT_MODE":return!e;case"CREATE_NOTE_WITH_ID":return!0;default:return e}},editorSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_NOTE_UPDATE":var n;if("d"!==(null===(n=t.remoteInfo)||void 0===n||null===(n=n.patch)||void 0===n||null===(n=n.content)||void 0===n?void 0:n.o)||!e.has(t.noteId))return e;var[a,r,o]=e.get(t.noteId),s=t.remoteInfo.patch.content.v.split("\t"),i=t.remoteInfo.original.content,l=(0,Va.TC)((0,Va.yK)(i).slice(0,a)).length,c=(0,Va.TC)((0,Va.yK)(i).slice(0,r)).length,[u,d]=s.reduce(((e,t)=>{var[n,a,r]=e;if(r>n&&r>a)return e;var o=t[0],s=t.slice(1);switch(o){case"=":return[n,a,r+parseInt(s,10)];case"-":var i=parseInt(s,10);return[n>r?n-i:n,a>r?a-i:a,r];case"+":var l=decodeURIComponent(s).length;return[n>r?n+l:n,a>r?a+l:a,r];default:return e}}),[l,c,0]),m=(0,Va.yK)(t.note.content.slice(0,u)).length,p=(0,Va.yK)(t.note.content.slice(0,d)).length;return new Map(e).set(t.noteId,[m,p,o]);case"STORE_EDITOR_SELECTION":return new Map(e).set(t.noteId,[t.start,t.end,t.direction]);default:return e}},editingTags:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"TAG_EDITING_TOGGLE":return!e;case"OPEN_NOTE":case"SELECT_NOTE":case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":case"SHOW_UNTAGGED_NOTES":case"NAVIGATION_TOGGLE":return!1;default:return e}},filteredNotes:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,n=arguments.length>1?arguments[1]:void 0;return void 0===(null===(e=n.meta)||void 0===e?void 0:e.searchResults)?t:n.meta.searchResults.noteIds},hasLoadedNotes:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"FILTER_NOTES"===(arguments.length>1?arguments[1]:void 0).type||e},numberOfMatchesInNote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"STORE_NUMBER_OF_MATCHES_IN_NOTE"===t.type?t.matches:e},openedNote:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CLOSE_NOTE":return null;case"OPEN_NOTE":return null!==(e=null==a?void 0:a.noteId)&&void 0!==e?e:n;case"SELECT_NOTE":return a.noteId;default:return void 0!==(null===(t=a.meta)||void 0===t?void 0:t.nextNoteToOpen)?a.meta.nextNoteToOpen:n}},openedRevision:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_REVISION":case"RESTORE_NOTE_REVISION":return null;case"OPEN_REVISION":return[t.noteId,t.version];default:return e}},restoreDeletedTags:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"TOGGLE_RESTORING_DELETED_TAGS":return!e;case"REVISIONS_TOGGLE":return!0;default:return e}},searchQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SEARCH"===t.type?t.searchQuery:e},selectedSearchMatchIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"STORE_SEARCH_SELECTION"===t.type?t.index:e},showAlternateLoginPrompt:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"SHOW_ALTERNATE_LOGIN_PROMPT":return!e;case"HIDE_ALTERNATE_LOGIN_PROMPT":return!1;default:return e}},showNavigation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAVIGATION_TOGGLE":return!e;case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":case"SHOW_UNTAGGED_NOTES":return!1;case"SHOW_DIALOG":return"SETTINGS"!==t.name&&e;default:return e}},showNoteActions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"NOTE_ACTIONS_TOGGLE":return!e;case"NAVIGATION_TOGGLE":case"NOTE_ACTIONS_CLOSE":case"NOTE_INFO_TOGGLE":case"REVISIONS_TOGGLE":case"SELECT_NOTE":case"SHOW_DIALOG":case"TRASH_NOTE":return!1;default:return e}},showNoteInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"NOTE_INFO_TOGGLE":return!e;case"NAVIGATION_TOGGLE":case"NOTE_ACTIONS_TOGGLE":case"SELECT_NOTE":return!1;default:return e}},showNoteList:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"NOTE_LIST_TOGGLE":return!e;case"FOCUS_SEARCH_FIELD":return!0;case"OPEN_NOTE":return!1;default:return e}},showRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"REVISIONS_TOGGLE":return!e;case"CLOSE_REVISION":case"OPEN_NOTE":case"SELECT_NOTE":case"CREATE_NOTE_WITH_ID":case"RESTORE_NOTE_REVISION":return!1;default:return e}},simperiumConnected:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SIMPERIUM_CONNECTION_STATUS_TOGGLE"===t.type?t.simperiumConnected:e},tagSuggestions:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,n=arguments.length>1?arguments[1]:void 0;return void 0===(null===(e=n.meta)||void 0===e?void 0:e.searchResults)?t:n.meta.searchResults.tagHashes},unsyncedNoteIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,t=arguments.length>1?arguments[1]:void 0;return"SET_UNSYNCED_NOTE_IDS"===t.type?t.noteIds:e}});function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ka=(0,sa.HY)({browser:Ia,data:xa,settings:Ga,simperium:Ha,ui:za}),qa=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||sa.Zz,Qa=n(78325),Za=n(84440);class Xa{constructor(e){(0,r.A)(this,"nextDeadline",Date.now()+1e3),(0,r.A)(this,"runTimer",null),this.bucket=e,this.log=ya()("bucket-queue:".concat(e.name)),this.queue=new Map,e.on("index",(()=>this.schedule())),window.addEventListener("online",(()=>this.schedule())),this.schedule()}add(e,t){var n,a=null!==(n=this.queue.get(e))&&void 0!==n?n:1/0,r=Math.min(t,a);this.nextDeadline=Math.min(this.nextDeadline,r),this.log('added "'.concat(e,'" with deadline ').concat(new Date(r))),this.queue.set(e,r),this.schedule()}has(e){return this.queue.has(e)}run(){this.process(),this.schedule()}schedule(){this.runTimer&&clearTimeout(this.runTimer),this.runTimer=setTimeout((()=>this.run()),this.bucket.isIndexing||!navigator.onLine?1e4:this.nextDeadline-Date.now())}process(){if(this.bucket.isIndexing)this.log("skipping processing run because bucket is indexing");else if(navigator.onLine){var e=this.getNextNote();null!==e&&(this.log("telling bucket to sync ".concat(e)),this.queue.delete(e),this.bucket.touch(e).then((()=>this.log("sync'd ".concat(e)))))}else this.log("skipping processing run because browser is offline")}getNextNote(){var e=Date.now();for(var[t,n]of this.queue)if(n<=e)return t;return null}}class Ja{constructor(){this.entities=new Map}get(e,t){t(null,{id:e,data:this.entities.get(e)})}find(e,t){t(null,[...this.entities].map((e=>{var[t,n]=e;return{id:t,data:n}})))}remove(e,t){this.entities.delete(e),t(null)}update(e,t,n,a){this.entities.set(e,t),a(null,{id:e,data:t,isIndexing:n})}}class $a{constructor(){this.cv="",this.entities=new Map}getChangeVersion(){return Promise.resolve(this.cv)}setChangeVersion(e){return this.cv=e,Promise.resolve()}get(e){var t;return Promise.resolve(null!==(t=this.entities.get(e))&&void 0!==t?t:{key:e,data:{}})}put(e,t,n){var a={key:e,data:n,version:t};return this.entities.set(e,a),Promise.resolve(a)}remove(e){var t=this.entities.get(e);return this.entities.delete(e),Promise.resolve(t)}eachGhost(e){this.entities.forEach((t=>e(t)))}}class er{constructor(e){this.store=e}get(e,t){t(null,{id:e,data:this.store.getState().data.notes.get(e)})}find(e,t){t(null,[...this.store.getState().data.notes.entries()].map((e=>{var[t,n]=e;return{id:t,data:n}})))}remove(e,t){this.store.dispatch({type:"NOTE_BUCKET_REMOVE",noteId:e}),t(null)}update(e,t,n,a){this.store.dispatch({type:"NOTE_BUCKET_UPDATE",noteId:e,note:t,isIndexing:n}),a(null,{id:e,data:t})}}class tr{constructor(e){this.store=e}get(e,t){t(null,{id:e,data:this.store.getState().data.preferences.get(e)})}find(e,t){t(null,[...this.store.getState().data.preferences.entries()].map((e=>{var[t,n]=e;return{id:t,data:n}})))}remove(e,t){this.store.dispatch({type:"PREFERENCES_BUCKET_REMOVE",id:e}),t(null)}update(e,t,n,a){this.store.dispatch({type:"PREFERENCES_BUCKET_UPDATE",id:e,data:t,isIndexing:n}),a(null,{id:e,data:t})}}class nr{constructor(e,t){this.bucketName=e,this.store=t}getChangeVersion(){var e=this.store.getState().simperium.ghosts[0].get(this.bucketName);return Promise.resolve(e)}setChangeVersion(e){return this.store.dispatch({type:"GHOST_SET_CHANGE_VERSION",bucketName:this.bucketName,version:e}),Promise.resolve()}get(e){var t=this.store.getState().simperium.ghosts[1].get(this.bucketName),n=null==t?void 0:t.get(e);return Promise.resolve(null!=n?n:{key:e,data:{}})}put(e,t,n){var a={key:e,data:n,version:t};return this.store.dispatch({type:"GHOST_SET_ENTITY",bucketName:this.bucketName,entityId:e,ghost:a}),Promise.resolve(a)}remove(e){var t=this.store.getState().simperium.ghosts[1].get(this.bucketName),n=null==t?void 0:t.get(e);return this.store.dispatch({type:"GHOST_REMOVE_ENTITY",bucketName:this.bucketName,entityId:e}),Promise.resolve(n)}eachGhost(e){var t;(null!==(t=this.store.getState().simperium.ghosts[1].get(this.bucketName))&&void 0!==t?t:new Map).forEach((t=>e(t)))}}class ar{constructor(e){this.store=e}get(e,t){t(null,{id:e,data:this.store.getState().data.tags.get(e)})}find(e,t){t(null,[...this.store.getState().data.tags.entries()].map((e=>{var[t,n]=e;return{id:t,data:n}})))}remove(e,t){this.store.dispatch({type:"TAG_BUCKET_REMOVE",tagHash:e}),t(null)}update(e,t,n,a){this.store.dispatch({type:"TAG_BUCKET_UPDATE",tagHash:e,tag:t,isIndexing:n}),a(null,{id:e,data:t})}}var rr=ya()("simperium-middleware"),or=(e,t,a)=>r=>{var{dispatch:o,getState:s}=r,i=(0,Za.Ay)(oa()().app_id,t,{objectStoreProvider:e=>{switch(e.name){case"account":return new Ja;case"note":return new er(r);case"preferences":return new tr(r);case"tag":return new ar(r)}},ghostStoreProvider:e=>"account"===e.name?new $a:new nr(e.name,r)});i.on("unauthorized",(()=>e())),(e=>new Promise((t=>{var n=a=>{if(a.startsWith("0:auth:")){var[r,o]=a.split("0:auth:");e.off("message",n),t(o)}};e.on("message",n)})))(i).then((e=>{rr("authenticated: ".concat(e)),o(g.A.settings.setAccountName(e))})),((e,t)=>{var{dispatch:n,getState:a}=t,r=-1/0;e.on("message",(()=>{r=Date.now(),"green"!==a().simperium.connectionStatus&&n({type:"CHANGE_CONNECTION_STATUS",status:"green"})})),setInterval((()=>{var e=Date.now()-r,t=a().simperium.connectionStatus;e>8e3&&"green"===t&&n({type:"CHANGE_CONNECTION_STATUS",status:"red"})}),1e3),window.addEventListener("online",(()=>{"offline"===a().simperium.connectionStatus&&n({type:"CHANGE_CONNECTION_STATUS",status:"red"})})),window.addEventListener("offline",(()=>{n({type:"CHANGE_CONNECTION_STATUS",status:"offline"})})),e.on("disconnect",(()=>{n({type:"CHANGE_CONNECTION_STATUS",status:navigator.onLine?"red":"offline"})}))})(i,r),Ee.b8||(e=>{window.addEventListener("beforeunload",(t=>{if(0!==dt(e.getState()).notes.length){t.preventDefault();var n="There are unsynchronized changes - do you want to logout and lose those changes?";return t.returnValue=n,n}}))})(r);var l=i.bucket("note");l.channel.on("update",((e,t,n,a,r)=>{o(n&&a&&void 0!==r?{type:"REMOTE_NOTE_UPDATE",noteId:e,note:t,remoteInfo:{original:n,patch:a,isIndexing:r}}:{type:"REMOTE_NOTE_UPDATE",noteId:e,note:t})})),l.channel.on("remove",(e=>o({type:"REMOTE_NOTE_DELETE_FOREVER",noteId:e}))),"Notification"in window&&n.e(841).then(n.bind(n,14290)).then((e=>{var{announceNoteUpdates:t}=e;return l.channel.on("update",t(r))})),l.channel.localQueue.on("send",(e=>{o({type:"SUBMIT_PENDING_CHANGE",entityId:e.id,ccid:e.ccid})})),l.channel.on("acknowledge",((e,t)=>{o({type:"ACKNOWLEDGE_PENDING_CHANGE",entityId:e,ccid:t.ccid})}));var c=i.bucket("tag");c.channel.on("update",((e,t,n,a,r)=>{o(n&&a&&void 0!==r?{type:"REMOTE_TAG_UPDATE",tagHash:e,tag:t,remoteInfo:{original:n,patch:a,isIndexing:r}}:{type:"REMOTE_TAG_UPDATE",tagHash:e,tag:t})})),c.channel.on("remove",(e=>o({type:"REMOTE_TAG_DELETE",tagHash:e})));var u=i.bucket("account");u.on("update",((e,t)=>{"email-verification"===e&&(e=>{var{token:t,sent_to:n}=e,r=(e=>{try{var{username:t,verified_at:n}=JSON.parse(e);return{username:t,verifiedAt:n}}catch(e){return null}})(t),s=r&&r.username===a;o({type:"UPDATE_ACCOUNT_VERIFICATION",state:s?"verified":n===a?"pending":"unverified"})})(t)})),u.channel.on("ready",(()=>{"unknown"===s().data.accountVerification&&o({type:"UPDATE_ACCOUNT_VERIFICATION",state:"unverified"})}));var d=i.bucket("preferences");d.channel.on("update",((e,t)=>{"preferences-key"===e&&!!t.analytics_enabled!==s().data.analyticsAllowed&&o({type:"REMOTE_ANALYTICS_UPDATE",allowAnalytics:!!t.analytics_enabled})})),d.channel.once("ready",(0,Xt.A)((function*(){var e,t=yield d.get("preferences-key");o({type:"REMOTE_ANALYTICS_UPDATE",allowAnalytics:!(null==t||null===(e=t.data)||void 0===e||!e.analytics_enabled)})})));var m=new Xa(l),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return m.add(e,Date.now()+t)},h=new Set,E=new Xa(c),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return E.add(e,Date.now()+t)},N=new Xa(d);return window.addEventListener("storage",(t=>{"simplenote_logout"===t.key&&(ma(),i.end(),e())})),t=>n=>{var a=r.getState(),u=t(n),d=r.getState();switch(n.type){case"ADD_COLLABORATOR":case"ADD_NOTE_TAG":var g=(0,te.YG)("ADD_COLLABORATOR"===n.type?n.collaboratorAccount:n.tagName);return a.data.tags.has(g)||v(g),p(n.noteId),u;case"REMOVE_COLLABORATOR":case"REMOVE_NOTE_TAG":case"CREATE_NOTE_WITH_ID":case"INSERT_TASK_INTO_NOTE":case"EDIT_NOTE":return p(n.noteId),u;case"FILTER_NOTES":case"OPEN_NOTE":case"SELECT_NOTE":var E,f,T,y,O=null!==(E=null!==(f=n.noteId)&&void 0!==f?f:null===(T=n.meta)||void 0===T?void 0:T.nextNoteToOpen)&&void 0!==E?E:s().ui.openedNote;return!O||null!==(y=d.data.noteRevisions.get(O))&&void 0!==y&&y.size||h.has(O)||(h.add(O),setTimeout((()=>{s().ui.openedNote===O&&l.getRevisions(O).then((e=>{o({type:"LOAD_REVISIONS",noteId:O,revisions:e.map((e=>{var{data:t,version:n}=e;return[n,t]})).sort(((e,t)=>e[0]-t[0]))})}))}),250)),u;case"REVISIONS_TOGGLE":var w=d.ui.showRevisions,b=d.ui.openedNote;return b&&w&&l.getRevisions(b).then((e=>{o({type:"LOAD_REVISIONS",noteId:b,revisions:e.map((e=>{var{data:t,version:n}=e;return[n,t]})).sort(((e,t)=>e[0]-t[0]))})})),u;case"RESTORE_NOTE_REVISION":return n.note.tags.map(te.YG).forEach((e=>{a.data.tags.has(e)||v(e,10)})),p(n.noteId,10),u;case"MARKDOWN_NOTE":case"PIN_NOTE":case"PUBLISH_NOTE":case"RESTORE_NOTE":case"TRASH_NOTE":return p(n.noteId,10),u;case"IMPORT_NOTE_WITH_ID":return n.note.tags.forEach((e=>{var t=(0,te.YG)(e);a.data.tags.has(t)||v(t,10)})),p(n.noteId,10),u;case"DELETE_NOTE_FOREVER":return setTimeout((()=>l.remove(n.noteId)),10),u;case"RENAME_TAG":var A=(0,te.YG)(n.oldTagName),_=(0,te.YG)(n.newTagName);return _!==A&&setTimeout((()=>c.remove(A)),10),d.data.notes.forEach(((e,t)=>{a.data.notes.get(t)!==e&&p(t)})),v(_),u;case"REORDER_TAG":return d.data.tags.forEach(((e,t)=>{v(t)})),u;case"SET_ANALYTICS":return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;N.add(e,Date.now()+t)}("preferences-key"),u;case"TRASH_TAG":return c.remove((0,te.YG)(n.tagName)),d.data.notes.forEach(((e,t)=>{a.data.notes.get(t)!==e&&p(t)})),u;case"CLOSE_WINDOW":var S=dt(d);return S.notes.forEach((e=>m.add(e,Date.now()))),S.notes.length>0?(r.dispatch({type:"SHOW_DIALOG",name:"CLOSE-WINDOW-CONFIRMATION"}),u):(r.dispatch({type:"REALLY_CLOSE_WINDOW"}),u);case"LOGOUT":var C=dt(d);return C.notes.forEach((e=>m.add(e,Date.now()))),C.notes.length>0?(r.dispatch({type:"SHOW_DIALOG",name:"LOGOUT-CONFIRMATION"}),u):(ma(),localStorage.setItem("simplenote_logout",Math.random().toString()),i.end(),e(),u);case"REALLY_LOGOUT":return ma(),localStorage.setItem("simplenote_logout",Math.random().toString()),i.end(),e(),u}return u}},sr=n(39184),ir=oa()(),lr=(e,t,n)=>{i().setAppElement("#root"),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return(e=>pa().then((t=>new Promise((n=>{var a=!0,r=t.transaction(["state","revisions"],"readonly");t.onversionchange=()=>{a=!1,n([{},ha])};var o=r.objectStore("state").get("state");o.onsuccess=()=>{if(a){var t=o.result;if(t)try{var s;if(null!==e&&t.accountName!==e)return void n([{},ha]);var i=new Map(t.noteTags.map((e=>{var[t,n]=e;return[t,new Set(n)]}))),l={data:{analyticsAllowed:null!==(s=t.allowAnalytics)&&void 0!==s?s:null,notes:new Map(t.notes),noteTags:i,tags:new Map(t.tags)},settings:{accountName:t.accountName},simperium:{ghosts:[new Map(t.cvs),new Map(t.ghosts)],lastRemoteUpdate:new Map(t.lastRemoteUpdate),lastSync:new Map(t.lastSync)}};"preferences"in t?l.data.preferences=new Map(t.preferences):(l.simperium.ghosts[0].delete("preferences"),l.simperium.ghosts[1].delete("preferences"));var c=r.objectStore("revisions").openCursor(),u=new Map;c.onsuccess=()=>{if(a){var e=c.result;e?(u.set(e.key,new Map(e.value)),e.continue()):n([ua(ua({},l),{},{data:ua(ua({},l.data),{},{noteRevisions:u})}),ha])}else n([l,ha])},c.onerror=()=>n([l,ha])}catch(e){n([{},ha])}else n([{},ha])}else n([{},ha])},o.onerror=()=>n([{},ha])})))).catch((()=>[{},null])))(e).then((t=>{var a,r,[o,s]=t;return(0,sa.y$)(Ka,Ya(Ya({},o),{},{settings:Ya(Ya({},o.settings),{},{accountName:null!==(a=null===(r=o.settings)||void 0===r?void 0:r.accountName)&&void 0!==a?a:e})}),qa(la()("settings",{key:"simpleNote",slicer:e=>t=>({[e]:(0,_.omit)(t[e],["allowNotifications","focusModeEnabled"])})}),(0,sa.Tw)(fa,Qn.r1,Da,ba.r1,Fe,Sa,...Ee.b8?[wa]:[],...n,...s?[s]:[])))}))}(n,or(e,t,n)).then((e=>{var t;Object.defineProperties(window,{dispatch:{get(){return e.dispatch}},state:{get(){return e.getState()}}}),null===(t=window.electron)||void 0===t||t.send("appStateUpdate",{settings:e.getState().settings,editMode:e.getState().ui.editMode}),(0,Qa.render)(a.createElement(o.Kq,{store:e},a.createElement(aa.N,{isDevConfig:(0,sr.A)(null==ir?void 0:ir.development)},a.createElement(na,{isDevConfig:(0,sr.A)(null==ir?void 0:ir.development)}))),document.getElementById("root"))}))}},94541:function(e,t,n){"use strict";n.r(t),n.d(t,{NotePreview:function(){return v},default:function(){return f}});var a=n(63696),r=n(80249),o=n(51938),s=n(48940),i=n(14111),l=n(9985),c=n.n(l),u=n(17243),d={type:"output",regex:'<input type="checkbox" disabled',replace:'<input type="checkbox" '},m={type:"output",regex:">\n",replace:">"},p=(e,t)=>{var n=e.parentNode;t.forEach((e=>{n.childNodes.forEach((n=>{var a,r,o;if(n.nodeType===Node.TEXT_NODE&&null!==(a=n.textContent)&&void 0!==a&&a.toLocaleLowerCase().includes(e)){var s=null===(r=n.textContent)||void 0===r?void 0:r.toLocaleLowerCase().indexOf(e),i=n.splitText(s),l=i.splitText(e.length),c=document.createElement("span");c.setAttribute("class","search-match"),null===(o=i.parentNode)||void 0===o||o.replaceChild(c,i),c.appendChild(i),p(l,t)}}))}))},g=(e,t,a)=>(e=>n.e(6632).then(n.t.bind(n,79132,23)).then((t=>{var{default:n}=t;n.extension("enableCheckboxes",d),n.extension("removeLineBreaks",m);var a=new n.Converter({extensions:["enableCheckboxes","removeLineBreaks"]});a.setFlavor("github"),a.setOption("simpleLineBreaks",!1),a.setOption("ghMentions",!1),a.setOption("smoothLivePreview",!0),a.setOption("tables",!0),a.setOption("strikethrough",!0);var r=e.replace(/([ \t\u2000-\u200a]*)\u2022(\s)/gm,"$1-$2");return(e=>{for(var t=(new DOMParser).parseFromString(e,"text/html"),n=t.createTreeWalker(t.body,NodeFilter.SHOW_ALL,null,!1),a=[],r=[],o=function(){var e=n.currentNode;if((e=>{switch(e.nodeName.toLowerCase()){case"head":case"html":case"iframe":case"link":case"meta":case"object":case"script":case"style":return!0;default:return!1}})(e))return r.push(e),0;if(!(e=>{var t=e.nodeName.toLowerCase();if("input"===t)return"checkbox"===e.getAttribute("type");switch(t){case"#text":case"a":case"article":case"b":case"br":case"blockquote":case"cite":case"code":case"dd":case"del":case"div":case"dt":case"em":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"hr":case"i":case"img":case"ins":case"kbd":case"li":case"ol":case"p":case"pre":case"s":case"span":case"strong":case"sub":case"sup":case"table":case"tbody":case"td":case"th":case"thead":case"tr":case"tt":case"ul":return!0;default:return!1}})(e))return a.push(e),0;var t=e.nodeName.toLowerCase();(0,u.filter)(e.attributes,(e=>{var{name:n,value:a}=e;return!(((e,t,n)=>{switch(e){case"a":switch(t){case"href":return["http","https","simplenote"].includes(n.toLowerCase().trim().split("://")[0]);case"alt":case"rel":case"title":return!0;default:return!1}case"img":switch(t){case"alt":case"src":case"title":case"width":return!0;default:return!1}case"input":switch(t){case"disabled":case"checked":case"type":return!0;default:return!1}case"li":return"class"===t&&"task-list-item"===n;case"ol":return"start"===t;case"th":case"td":if("style"===t)switch(n){case"text-align:center;":case"text-align:left;":case"text-align:right;":return!0;default:return!1}return!1;default:return!1}})(t,n,a)||("href"===n||"src"===n)&&c().isWebUri(a)||"href"===n&&a.startsWith("mailto:")&&i.validate(a.slice(7)))})).forEach((t=>{var{name:n}=t;return e.removeAttribute(n)}));var o="a"===t&&e.getAttribute("href");"a"!==t||"string"!=typeof o||o.startsWith("mailto:")||(e.setAttribute("target","_blank"),e.setAttribute("rel","external noopener noreferrer")),"li"===t&&"task-list-item"===e.getAttribute("class")&&e.setAttribute("style","list-style: none;")};n.nextNode();)o();return r.forEach((e=>{try{var t;null==e||null===(t=e.parentNode)||void 0===t||t.removeChild(e)}catch(e){}})),a.forEach((e=>{var t,n=e.parentNode;try{for(;t=e.firstChild;)null==n||n.insertBefore(t,e);null==n||n.removeChild(e)}catch(e){}})),t.body.innerHTML})(a.makeHtml(r))})))(t).then((t=>(e.innerHTML=t,e))).then((e=>{if(!a)return e.querySelectorAll("pre code");var t=(0,s.S)(a).map((e=>e.toLocaleLowerCase()));if(!t.length)return e.querySelectorAll("pre code");for(var n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return t.some((t=>{var n;return null===(n=e.textContent)||void 0===n?void 0:n.toLocaleLowerCase().includes(t)}))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1),r=[],o=n.currentNode;o;)r.push(o),o=n.nextNode();return r.forEach((e=>p(e,t))),e.querySelectorAll("pre code")})).then((e=>{if(e.length)return n.e(6021).then(n.bind(n,42408)).then((t=>{var{default:n}=t;e.forEach(n.highlightElement)})).catch()})),h=n(37453),E=n(61943),v=e=>{var t,{editNote:n,isFocused:r,note:s,noteId:i,notes:l,openNote:c,searchQuery:u,showRenderedView:d}=e,m=(0,a.useRef)();return(0,a.useEffect)((()=>{var e=e=>{if(!r)return!0;if(!document.getSelection().isCollapsed)return!0;var t=document.createElement("div");g(t,s.content,u).then((()=>{try{e.clipboardData.setData("text/plain",t.innerHTML)}catch(e){navigator.clipboard.writeText(t.innerHTML)}})),e.preventDefault()};return document.addEventListener("copy",e,!1),()=>document.removeEventListener("copy",e,!1)}),[r,u]),(0,a.useEffect)((()=>{var e,t=e=>{for(var t,a,r=e.target;null!==r;r=r.parentNode)if("A"===r.tagName){e.preventDefault(),e.stopPropagation();var u=r;if(u.href.startsWith("simplenote://note/")){var d=/^simplenote:\/\/note\/(.+)$/.exec(u.href);if(!d)return;var[p,g]=d;return void(l.has(g)&&c(g))}return void(u.href.startsWith("http://localhost")||(0,h.i)(u.href))}var E="INPUT"===(null==e||null===(t=e.target)||void 0===t?void 0:t.tagName)?e.target.parentElement:e.target;if("INPUT"!==(null==E||null===(a=E.children[0])||void 0===a?void 0:a.tagName));else{e.preventDefault(),e.stopPropagation();var v=m.current.querySelectorAll("[data-markdown-root] .task-list-item"),N=Array.prototype.indexOf.call(v,E),f=0,T=s.content.replace(o.Dm,((e,t,n,a)=>t+(f++===N?" "===n?"- [x]":"- [ ]":" "===n?"- [ ]":"- [x]")+a));n(i,{content:T})}};return null===(e=m.current)||void 0===e||e.addEventListener("click",t,!0),()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.removeEventListener("click",t,!0)}}),[s.content]),(0,a.useEffect)((()=>{var e;m.current&&(null!=s&&s.content&&d?g(m.current,s.content,u):m.current.innerText=(0,o.yK)(null!==(e=null==s?void 0:s.content)&&void 0!==e?e:""))}),[null==s?void 0:s.content,u,d]),a.createElement("div",{className:"note-detail-wrapper"},a.createElement("div",{className:"note-detail note-detail-preview"},a.createElement("div",{ref:m,className:"note-detail-markdown note-preview","data-markdown-root":!0},!d&&(0,o.yK)(null!==(t=null==s?void 0:s.content)&&void 0!==t?t:""))))},N={editNote:E.A.data.editNote,openNote:E.A.ui.selectNote},f=(0,r.Ng)(((e,t)=>{var n,a,r=null!==(n=t.noteId)&&void 0!==n?n:e.ui.openedNote,o=null!==(a=t.note)&&void 0!==a?a:e.data.notes.get(r);return{isFocused:0===e.ui.dialogs.length&&!e.ui.showNoteActions,note:o,noteId:r,notes:e.data.notes,searchQuery:e.ui.searchQuery,showRenderedView:!(null==o||!o.systemTags.includes("markdown")||e.ui.editMode)}}),N)(v)},70103:function(e,t,n){"use strict";var a=n(63696),r=n(14863),o=n(4452),s=n.n(o);t.A=e=>{var{onSelect:t,selected:n=!1,interactive:o=!0,deleted:i=!1,tagName:l}=e;return a.createElement("div",{className:s()("tag-chip",{selected:n,interactive:o,deleted:i}),"data-tag-name":l,onClick:t},l,o&&a.createElement("span",{className:"remove-tag-icon"},a.createElement(r.A,null)))}},255:function(e,t,n){"use strict";var a=n(68102),r=n(81515),o=n(63696),s=n(53570),i=["icon","title"];t.A=e=>{var{icon:t,title:n}=e,l=(0,r.A)(e,i);return o.createElement(s.A,{classes:{tooltip:"icon-button__tooltip"},enterDelay:200,title:n},o.createElement("button",(0,a.A)({"aria-label":n,className:"icon-button",type:"button","data-title":n},l),t))}},38634:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var a=n(63696);function r(){return a.createElement("svg",{className:"icon-notes",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M19 5V15H9V5H19m0-2H9A2 2 0 0 0 7 5V15a2 2 0 0 0 2 2H19a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2ZM5 19V7A2 2 0 0 0 3 9V19a2 2 0 0 0 2 2H15a2 2 0 0 0 2-2ZM17 7H11V9h6Zm0 4H11v2h6Z"}))}},38711:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var a=n(63696);function r(){return a.createElement("svg",{className:"logo",width:"96",height:"96",viewBox:"0 0 176 176"},a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},a.createElement("path",{d:"M152.37 87.885c0-34.066-27.182-63.42-59.45-64.854-6.416-.284-12.647 1.432-17.58 5.573-5.002 4.196-8.07 10.09-8.638 16.595C65.43 59.73 78.537 68.618 91.225 72.09c30.69 8.398 48.462 30.086 46.655 56.757 9.057-11.194 14.49-25.442 14.49-40.962zM84.345 97.24c-28.696-7.853-45.817-29.174-43.62-54.317.027-.287.073-.567.102-.852C29.19 53.846 22 70.023 22 87.886c0 34.348 27.955 63.828 60.277 64.933 7.227.248 14.214-1.685 19.766-6.344 5.67-4.757 9.146-11.435 9.79-18.808 1.703-19.463-16.492-27.417-27.488-30.426z",fill:"#4895d9"})))}},97099:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var a=n(63696);function r(e){var{onClick:t}=e;return a.createElement("svg",{className:"icon-trash",onClick:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M18 21H6c-1.105 0-2-0.895-2-2V9h2v10h12V9h2v10C20 20.105 19.105 21 18 21zM9 9h2v8H9V9zM13 9h2v8h-2V9zM16 5V4c0-1.105-0.895-2-2-2h-4C8.895 2 8 2.895 8 4v1H3v2h18V5H16zM10 4h4v1h-4V4z"}))}},64784:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var a=n(63696);function r(){return a.createElement("svg",{className:"icon-untagged-notes",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),a.createElement("path",{d:"M15.79 7.21c0.552 0 1 0.448 1 1s-0.448 1-1 1 -1-0.448-1-1S15.238 7.21 15.79 7.21zM11.5 7.48L13.12 6H18v4.88l-1.48 1.62 1.34 1.42L20 11.71V4h-7.71l-2.21 2.14L11.5 7.48zM21 19.59L4.41 3 3 4.41l4.3 4.3L4 12c-0.388 0.39-0.388 1.02 0 1.41L10.59 20c0.39 0.388 1.02 0.388 1.41 0l3.29-3.29 4.3 4.3L21 19.59zM11.28 17.88l-5.16-5.17 2.59-2.59 5.17 5.17L11.28 17.88z"}))}},71559:function(e,t,n){"use strict";n.d(t,{Sz:function(){return p},r1:function(){return g},u:function(){return m}});var a=n(41705),r=n(16663),o=n(48940),s=n(62285),i=n(16742);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=[],d=e=>{var t,n,a,r,o,i,l,c,u,d;return{content:null!==(t=null===(n=e.content)||void 0===n?void 0:n.toLocaleLowerCase())&&void 0!==t?t:"",casedContent:null!==(a=e.content)&&void 0!==a?a:"",tags:new Set(null!==(r=null===(o=e.tags)||void 0===o?void 0:o.map(s.YG))&&void 0!==r?r:[]),creationDate:null!==(i=e.creationDate)&&void 0!==i?i:Date.now()/1e3,modificationDate:null!==(l=e.modificationDate)&&void 0!==l?l:Date.now()/1e3,isPinned:null!==(c=null===(u=e.systemTags)||void 0===u?void 0:u.includes("pinned"))&&void 0!==c&&c,isTrashed:null!==(d=!!e.deleted)&&void 0!==d&&d}},m=e=>{for(var t,n=/(?:\btag:)([^\s,]+)/g,a=new Set;null!==(t=n.exec(e));)a.add((0,s.YG)(t[1]));return a},p=()=>[],g=e=>{var t={collection:{type:"all"},excludeIDs:[],hasSelectedFirstNote:!1,notes:new Map,searchQuery:"",searchTags:new Set,searchTerms:[],sortType:e.getState().settings.sortType,sortReversed:e.getState().settings.sortReversed,titleOnly:!1},n=[],a=[],l=[],g=e=>{var r=e=>(n,a)=>{var r=t.notes.get(n),o=t.notes.get(a);if(!r||!o)return n.localeCompare(a);if(r.isPinned!==o.isPinned)return r.isPinned?-1:1;var s=e(r,o);return 0!==s?s:n.localeCompare(a)},o=r(((e,t)=>e.casedContent.localeCompare(t.casedContent))),s=r(((e,t)=>t.creationDate-e.creationDate)),i=r(((e,t)=>t.modificationDate-e.modificationDate)),c=(e,t,n,a,r)=>{if(a>=r)return a;var o=Math.floor((a+r)/2),s=n(t,e[o]);return s<0?c(e,t,n,a,o):s>0?c(e,t,n,o+1,r):o};[[n,o],[a,s],[l,i]].forEach((t=>{var[n,a]=t,r=n.indexOf(e);r>-1&&n.splice(r,1);var o=c(n,e,a,0,n.length);n.splice(o,0,e)}))},h=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,{collection:u,excludeIDs:d,notes:m,searchTags:p,searchTerms:g,sortReversed:h,sortType:E,titleOnly:v}=c(c({},t),r),N=new Set,f=new Set,T=e.getState().data.notes,y="alphabetical"===E?n:"creationDate"===E?a:l,O=function(){var e=y[h?y.length-w-1:w];if(null!=d&&d.includes(e))return 0;var t=m.get(e);if(!t||!T.has(e))return 0;if("trash"===u.type!==t.isTrashed)return 0;if(("untagged"===u.type||p.has((0,s.YG)("untagged")))&&t.tags.size)return 0;var n=!0;for(var a of p.values())if("untagged"!==a&&!t.tags.has(a)){n=!1;break}if(!n)return 0;var r="tag"===u.type&&(0,s.YG)(u.tagName);if(0===g.length&&0===p.size&&r&&!t.tags.has(r))return 0;var o=v?(0,i.LK)(t.content):t.content;if(g.length>0&&!g.every((e=>o.includes(e.toLocaleLowerCase()))))return 0;t.isPinned?f.add(e):N.add(e)},w=0;w<y.length&&f.size+N.size<=o;w++)O();return[...f.values(),...N.values()]};p=(t,n)=>h(t,n).map((t=>[t,e.getState().data.notes.get(t)]));var E=n=>{var{data:a}=e.getState(),{searchQuery:o}=t,s=(0,r._N)(a.tags,a.noteTags,o);return{noteIds:n,tagHashes:s.length>0?s:u}},v=e=>c(c({},e),{},{meta:c(c({},e.meta),{},{searchResults:E(h())})}),N=(t,n)=>{var a,r,o,{ui:{filteredNotes:s,openedNote:i}}=e.getState();if(!i||i!==t)return n;var l=s.findIndex((e=>e===i)),u=-1===l?null!==(a=s[0])&&void 0!==a?a:null:null!==(r=null!==(o=s[l+1])&&void 0!==o?o:s[l-1])&&void 0!==r?r:null;return c(c({},n),{},{meta:c(c({},n.meta),{},{nextNoteToOpen:u})})},f=null,T=()=>{clearTimeout(f),f=setTimeout((()=>{var t=E(h());e.dispatch(c(c({type:"FILTER_NOTES"},t),{},{meta:{searchResults:t}}))}),30)};return e.getState().data.notes.forEach(((e,n)=>{t.notes.set(n,d(e)),g(n)})),T(),r=>i=>{var u,p,h,E,f,y=e=>{var n,a;return!t.hasSelectedFirstNote&&null!==(n=e.meta)&&void 0!==n&&null!==(n=n.searchResults)&&void 0!==n&&n.noteIds.length?(t.hasSelectedFirstNote=!0,r(c(c({},e),{},{meta:c(c({},e.meta),{},{nextNoteToOpen:null===(a=e.meta)||void 0===a?void 0:a.searchResults.noteIds[0]})}))):r(e)};switch(i.type){case"ADD_NOTE_TAG":var O=t.notes.get(i.noteId);return O?(O.tags.add((0,s.YG)(i.tagName)),O.modificationDate=Date.now()/1e3,g(i.noteId),y(v(i))):y(i);case"CREATE_NOTE_WITH_ID":return null!==(u=i.note)&&void 0!==u&&u.tags&&(null===(p=i.note)||void 0===p?void 0:p.tags.length)>0?t.collection={type:"tag",tagName:i.note.tags[0]}:t.collection={type:"all"},t.notes.set(i.noteId,d(null!==(h=i.note)&&void 0!==h?h:{})),g(i.noteId),T(),y(i);case"IMPORT_NOTE_WITH_ID":case"REMOTE_NOTE_UPDATE":case"RESTORE_NOTE_REVISION":return t.notes.set(i.noteId,d(null!==(E=i.note)&&void 0!==E?E:{})),g(i.noteId),T(),y(i);case"DELETE_NOTE_FOREVER":case"REMOTE_NOTE_DELETE_FOREVER":return t.notes.delete(i.noteId),f=i.noteId,[n,a,l].forEach((e=>{var t=e.indexOf(f);t>-1&&e.splice(t,1)})),y(N(i.noteId,v(i)));case"EDIT_NOTE":var w=t.notes.get(i.noteId);return void 0!==i.changes.content&&(w.content=i.changes.content.toLocaleLowerCase(),w.casedContent=i.changes.content),void 0!==i.changes.tags&&(w.tags=new Set(i.changes.tags.map(s.YG))),void 0!==i.changes.creationDate&&(w.creationDate=i.changes.creationDate),w.modificationDate=void 0!==i.changes.modificationDate?i.changes.modificationDate:Date.now()/1e3,void 0!==i.changes.deleted&&(w.isTrashed=!!i.changes.deleted),void 0!==i.changes.systemTags&&(w.isPinned=i.changes.systemTags.includes("pinned")),g(i.noteId),y(v(i));case"OPEN_TAG":return t.collection={type:"tag",tagName:i.tagName},y(v(i));case"PIN_NOTE":var b=t.notes.get(i.noteId);return b?(b.isPinned=i.shouldPin,b.modificationDate=Date.now()/1e3,g(i.noteId),y(v(i))):y(i);case"REMOVE_NOTE_TAG":var A=t.notes.get(i.noteId);return A?(A.tags.delete((0,s.YG)(i.tagName)),A.modificationDate=Date.now()/1e3,g(i.noteId),y(v(i))):y(i);case"RENAME_TAG":var _=(0,s.YG)(i.oldTagName),S=(0,s.YG)(i.newTagName);return"tag"===t.collection.type&&t.collection.tagName===i.oldTagName&&(t.collection={type:"tag",tagName:i.newTagName}),t.notes.forEach(((e,t)=>{e.tags.has(_)&&(e.tags.delete(_),e.tags.add(S),e.modificationDate=Date.now()/1e3,g(t))})),y(v(i));case"RESTORE_NOTE":var C=t.notes.get(i.noteId);return C?(C.isTrashed=!1,C.modificationDate=Date.now()/1e3,g(i.noteId),y(N(i.noteId,v(i)))):y(i);case"SELECT_TRASH":return t.collection={type:"trash"},y(v(i));case"SHOW_ALL_NOTES":return t.collection={type:"all"},y(v(i));case"SHOW_UNTAGGED_NOTES":return t.collection={type:"untagged"},y(v(i));case"SEARCH":return t.searchQuery=i.searchQuery,t.searchTerms=(0,o.S)(i.searchQuery),t.searchTags=m(i.searchQuery),y(v(i));case"setSortReversed":return t.sortReversed=i.sortReversed,y(v(i));case"setSortType":return t.sortType=i.sortType,void 0!==i.sortReversed&&(t.sortReversed=i.sortReversed),y(v(i));case"TOGGLE_SORT_ORDER":return t.sortReversed=!t.sortReversed,y(v(i));case"TRASH_NOTE":var R=t.notes.get(i.noteId);return R?(R.isTrashed=!0,R.modificationDate=Date.now()/100,g(i.noteId),y(N(i.noteId,v(i)))):y(i);case"TRASH_TAG":var I=(0,s.YG)(i.tagName);return t.notes.forEach(((e,t)=>{e.tags.has(I)&&(e.tags.delete(I),e.modificationDate=Date.now()/1e3,g(t))})),"tag"===t.collection.type&&t.collection.tagName!==i.tagName?y(i):("untagged"===t.collection.type&&e.getState().data.tags.size<=1&&(t.collection={type:"all"}),y(v(i)))}return y(i)}}},61943:function(e,t,n){"use strict";n.d(t,{A:function(){return A}});var a={};n.r(a),n.d(a,{recordEvent:function(){return d},withEvent:function(){return u}});var r={};n.r(r),n.d(r,{addCollaborator:function(){return m},editNote:function(){return p},exportNotes:function(){return g},importNote:function(){return h},markdownNote:function(){return E},pinNote:function(){return v},publishNote:function(){return N},removeCollaborator:function(){return f},renameTag:function(){return T},toggleAnalytics:function(){return y}});var o={};n.r(o),n.d(o,{reallyCloseWindow:function(){return O}});var s={};n.r(s),n.d(s,{remoteNoteUpdate:function(){return b}});var i=n(41705);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=(e,t)=>n=>{var a,r;return c(c({},n),{},{meta:c(c({},n.meta),{},{analytics:[...null!==(a=null===(r=n.meta)||void 0===r?void 0:r.analytics)&&void 0!==a?a:[],[e,t]]})})},d=(e,t)=>u(e,t)({type:"RECORD_EVENT"}),m=(e,t)=>({type:"ADD_COLLABORATOR",noteId:e,collaboratorAccount:t}),p=(e,t)=>({type:"EDIT_NOTE",noteId:e,changes:t}),g=()=>({type:"EXPORT_NOTES"}),h=e=>({type:"IMPORT_NOTE",note:e}),E=(e,t)=>({type:"MARKDOWN_NOTE",noteId:e,shouldEnableMarkdown:t}),v=(e,t)=>({type:"PIN_NOTE",noteId:e,shouldPin:t}),N=(e,t)=>({type:"PUBLISH_NOTE",noteId:e,shouldPublish:t}),f=(e,t)=>({type:"REMOVE_COLLABORATOR",noteId:e,collaboratorAccount:t}),T=(e,t)=>({type:"RENAME_TAG",oldTagName:e,newTagName:t}),y=()=>({type:"TOGGLE_ANALYTICS"}),O=()=>({type:"REALLY_CLOSE_WINDOW"}),w=n(69343),b=(e,t)=>({type:"REMOTE_NOTE_UPDATE",noteId:e,note:t}),A={analytics:a,data:r,electron:o,simperium:s,settings:w,ui:n(27528)}},69343:function(e,t,n){"use strict";n.r(t),n.d(t,{activateTheme:function(){return a},setAccountName:function(){return u},setLineLength:function(){return o},setNoteDisplay:function(){return r},setSortType:function(){return l},toggleAutoHideMenuBar:function(){return p},toggleFocusMode:function(){return d},toggleKeyboardShortcuts:function(){return s},toggleSortOrder:function(){return i},toggleSortTagsAlpha:function(){return c},toggleSpellCheck:function(){return m}});var a=e=>({type:"setTheme",theme:e}),r=e=>({type:"setNoteDisplay",noteDisplay:e}),o=e=>({type:"setLineLength",lineLength:e}),s=()=>({type:"KEYBOARD_SHORTCUTS_TOGGLE"}),i=()=>({type:"TOGGLE_SORT_ORDER"}),l=(e,t)=>({type:"setSortType",sortType:e,sortReversed:t}),c=()=>({type:"TOGGLE_SORT_TAGS_ALPHA"}),u=e=>({type:"setAccountName",accountName:e}),d=()=>({type:"TOGGLE_FOCUS_MODE"}),m=()=>({type:"TOGGLE_SPELLCHECK"}),p=()=>({type:"TOGGLE_AUTO_HIDE_MENU_BAR"})},27528:function(e,t,n){"use strict";n.r(t),n.d(t,{closeDialog:function(){return o},closeNote:function(){return s},closeNoteActions:function(){return i},closeWindow:function(){return l},createNote:function(){return c},deleteOpenNoteForever:function(){return d},dismissEmailVerifyDialog:function(){return u},emptyTrash:function(){return m},filterNotes:function(){return p},focusSearchField:function(){return g},hideAlternateLoginPrompt:function(){return S},logout:function(){return h},openNote:function(){return E},openTag:function(){return v},reallyLogOut:function(){return N},restoreOpenNote:function(){return f},search:function(){return D},selectNote:function(){return L},selectNoteAbove:function(){return T},selectNoteBelow:function(){return y},selectTrash:function(){return O},showAllNotes:function(){return w},showAlternateLoginPrompt:function(){return _},showDialog:function(){return A},showUntaggedNotes:function(){return b},storeRevisions:function(){return C},toggleEditMode:function(){return k},toggleNavigation:function(){return M},toggleNoteActions:function(){return G},toggleNoteInfo:function(){return P},toggleNoteList:function(){return x},toggleRestoringDeletedTags:function(){return I},toggleRevisions:function(){return R},toggleTagDrawer:function(){return H},toggleTagEditing:function(){return V},trashOpenNote:function(){return F}});var a=n(41705);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var o=()=>({type:"CLOSE_DIALOG"}),s=()=>({type:"CLOSE_NOTE"}),i=()=>({type:"NOTE_ACTIONS_CLOSE"}),l=()=>({type:"CLOSE_WINDOW"}),c=e=>({type:"CREATE_NOTE",note:e}),u=()=>({type:"UPDATE_ACCOUNT_VERIFICATION",state:"dismissed"}),d=()=>({type:"DELETE_OPEN_NOTE_FOREVER"}),m=()=>({type:"EMPTY_TRASH"}),p=(e,t)=>({type:"FILTER_NOTES",noteIds:e,tagHashes:t}),g=()=>({type:"FOCUS_SEARCH_FIELD"}),h=()=>({type:"LOGOUT"}),E=e=>({type:"OPEN_NOTE",noteId:e}),v=e=>({type:"OPEN_TAG",tagName:e}),N=()=>({type:"REALLY_LOG_OUT"}),f=()=>({type:"RESTORE_OPEN_NOTE"}),T=()=>({type:"SELECT_NOTE_ABOVE"}),y=()=>({type:"SELECT_NOTE_BELOW"}),O=()=>({type:"SELECT_TRASH"}),w=()=>({type:"SHOW_ALL_NOTES"}),b=()=>({type:"SHOW_UNTAGGED_NOTES"}),A=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"SHOW_DIALOG",name:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},_=e=>({type:"SHOW_ALTERNATE_LOGIN_PROMPT",email:e}),S=e=>({type:"HIDE_ALTERNATE_LOGIN_PROMPT",email:e}),C=(e,t)=>({type:"STORE_REVISIONS",noteId:e,revisions:t}),R=()=>({type:"REVISIONS_TOGGLE"}),I=()=>({type:"TOGGLE_RESTORING_DELETED_TAGS"}),D=e=>({type:"SEARCH",searchQuery:e}),L=e=>({type:"SELECT_NOTE",noteId:e}),k=()=>({type:"TOGGLE_EDIT_MODE"}),M=()=>({type:"NAVIGATION_TOGGLE"}),x=()=>({type:"NOTE_LIST_TOGGLE"}),G=()=>({type:"NOTE_ACTIONS_TOGGLE"}),P=()=>({type:"NOTE_INFO_TOGGLE"}),H=e=>({type:"TAG_DRAWER_TOGGLE",show:e}),V=()=>({type:"TAG_EDITING_TOGGLE"}),F=()=>({type:"TRASH_OPEN_NOTE"})},16663:function(e,t,n){"use strict";n.d(t,{_N:function(){return c}});var a=n(41705),r=n(63696),o=n(80249),s=n(27528),i=n(62285);class l extends r.Component{constructor(){super(...arguments),(0,a.A)(this,"updateSearch",(e=>{var{searchQuery:t,onSearch:n}=this.props,a=t.trim().split(" ");a.splice(-1,1,e);var r=a.join(" ");n(r+=" ")}))}render(){var{filteredTags:e,tags:t}=this.props;return r.createElement(r.Fragment,null,e.length>0&&r.createElement("div",{className:"tag-suggestions"},r.createElement("div",{className:"note-list-header"},"Search by Tag"),r.createElement("ul",{className:"tag-suggestions-list"},e.map((e=>{var n="untagged"===e?"untagged":t.get(e).name;return r.createElement("li",{key:e,id:e,className:"tag-suggestion-row",onClick:()=>this.updateSearch("tag:".concat(n))},r.createElement("div",{className:"tag-suggestion",title:n},"tag:",n))})))))}}(0,a.A)(l,"displayName","TagSuggestions");var c=(e,t,n)=>{var a=n.trim().split(" ").pop();if(!a)return[];var r=(0,i.YG)(a),o=a.startsWith("tag:")&&a.length>4?(0,i.YG)(a.slice(4)):null,s=e=>!(!o||e===o||!e.startsWith(o))||e.includes(r),l=[];for(var c of e.keys())s(c)&&l.push(c);return n.includes("tag:")||s((0,i.YG)("untagged"))&&l.push((0,i.YG)("untagged")),l.sort(((e,n)=>{var a,o,s,i,l=e.startsWith(r);if(l!==n.startsWith(r))return l?-1:1;var c=null!==(a=null===(o=t.get(e))||void 0===o?void 0:o.size)&&void 0!==a?a:0,u=null!==(s=null===(i=t.get(n))||void 0===i?void 0:i.size)&&void 0!==s?s:0;return c!==u?u-c:e.localeCompare(n)})).slice(0,5)};t.Ay=(0,o.Ng)((e=>{var{data:t,ui:{searchQuery:n,tagSuggestions:a}}=e;return{filteredTags:a,searchQuery:n,tags:t.tags}}),(e=>({onSearch:t=>{e((0,s.search)(t))}})))(l)},48940:function(e,t,n){"use strict";n.d(t,{C:function(){return a},S:function(){return r}});var a=e=>e.replace(/(?:\btag:)([^\s,]+)/g,"").trim(),r=e=>{if(!e)return[];for(var t,n=/(?:")((?:"|[^"])+?)(?:")/g,r=0,o="",s=a(e),i=[];null!==(t=n.exec(s));)i.push(t[0].slice(1,-1)),o+=s.slice(r,t.index),r=n.lastIndex;(r>0||0===i.length)&&r<s.length&&(o+=s.slice(r));var l=o.split(/[\b\s]/g).map((e=>e.trim())).filter((e=>e));return[...i,...l]}},16742:function(e,t,n){"use strict";n.d(t,{Cb:function(){return u},LK:function(){return i}});var a=n(66701),r=n.n(a),o=n(17243),s=n(48940),i=e=>{var t=new RegExp("\\s*([^\n]{1,".concat(64,"})"),"g").exec(e);if(!t)return"New Note…";var[,n]=t;return n},l=(e,t)=>{return e?(n=t,r()(n.replace(/(\s)\s+/g,"$1"),{stripListLeaders:!1})||t):t;var n},c=new Map,u=(e,t)=>{var n=function(e){return e.systemTags.includes("markdown")}(e),a=c.get(e.content);if(a){var[r,u,d]=a;if(u===n&&d===t)return r}var m=e.content||"",p=l(n,i(m)),g=l(n,((e,t)=>{var n,a="",r=0;if(null!=t&&t.trim()){var l=(0,s.S)(t);if(l.length>0){var c=l[0].toLocaleLowerCase(),u=30-c.length,d=new RegExp("(?:\\s|^)[^\n]{0,"+u+"}"+(0,o.escapeRegExp)(c)+".{0,200}(?=\\s|$)","ims").exec(e);if(d&&d.length>0)return 56320<=(n=(a=d[0].split("\n").filter((t=>"\r"!==t&&""!==t&&t!==i(e))).join("\n")).charCodeAt(0))&&n<=57343?a.slice(1):a}}var m=e.indexOf("\n");if(-1===m)return"";for(;m>-1&&r<3;){var p=e.indexOf("\n",m);if(-1===p)return a+e.slice(m).trim();var g=e.slice(m,p).trim();g&&(a+=g+"\n",r++),m=p+1}return a.trim()})(m,t)),h={title:p,preview:g};return c.set(e.content,[h,n,t]),h};t.Ay=u},51938:function(e,t,n){"use strict";n.d(t,{Dm:function(){return a},TC:function(){return o},yK:function(){return r}});var a=/^(\s*)- \[( |x|X)\](\s)/gm,r=e=>e.replace(a,((e,t,n,a)=>t+(" "===n?"":"")+a)),o=e=>e.replace(/\ue000|\ue001/g,(e=>""===e?"- [ ]":"- [x]"))},51800:function(){},28034:function(){}}]);